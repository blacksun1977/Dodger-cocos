{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\GameManager.js"],"names":["Common","require","cc","Class","extends","Component","properties","PlayerSpeed1","default","visible","PlayerSpeed2","label_PlayerSpeed","type","Label","Skill_1_On","Skill_1_Level","Skill_1_Time","label_Skill_1_Time","Skill_1_Max","GameSpeed","GamePause","RotationSpeed","label_RotationSpeed","ShootSpeed","label_ShootSpeed","BulletSpeed","label_BulletSpeed","BulletLifeTime","label_BulletLifeTime","ItemLifeTime1","ItemLifeTime2","Score","ItemNum","label_Score","Player","Node","Turret","Block1","Block2","Block3","Block4","upRotationSpeedPrefab","Prefab","upShootSpeedPrefab","upBulletSpeedPrefab","upBulletLifeTimePrefab","upPlayerSpeedPrefab","upSkill_1_MAXPrefab","onLoad","physicsManager","director","getPhysicsManager","enabled","GameInit","x","y","UpdateData","SwapBadItem","GameOver","log","scheduleOnce","GameReset","childernlist","node","children","i","childrenCount","destroy","getComponent","start","update","dt","string","toString","tmp","Math","floor","length","_getARandomPositon","max","min","random","_getDistance","v2","getPosition","pos1","pos2","sqrt","pow","SwapGoodItem","Itemlist","Array","newItem","instantiate","parent","postion","SwapItem","upRotationSpeed","upShootSpeed","upBulletSpeed","upBulletLifeTime","upPlayerSpeed","upSkill_1_MAX"],"mappings":"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","file":"GameManager.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["var Common = require('GameCommon');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n                            //玩家属性\r\n        PlayerSpeed1 :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        PlayerSpeed2 :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_PlayerSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        Skill_1_On :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        Skill_1_Level :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        Skill_1_Time :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_Skill_1_Time: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        Skill_1_Max :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        GameSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        GamePause :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n                            //难度属性\r\n        RotationSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_RotationSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        ShootSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_ShootSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        BulletSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_BulletSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        BulletLifeTime :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_BulletLifeTime: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        ItemLifeTime1: {\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        ItemLifeTime2: {\r\n            default: null,\r\n            visible: false,\r\n        },\r\n\r\n                            //游戏进程\r\n        Score :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        ItemNum :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_Score: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        Player: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Turret: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n                            //特定点位\r\n        Block1: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Block2: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        Block3: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        Block4: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n\r\n                            //预构体\r\n        upRotationSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upShootSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upBulletSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upBulletLifeTimePrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upPlayerSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upSkill_1_MAXPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad :function() {\r\n        //开启物理引擎\r\n        this.physicsManager = cc.director.getPhysicsManager();\r\n        this.physicsManager.enabled = true;\r\n\r\n        //初始化游戏参数\r\n        this.GameInit();\r\n     },\r\n\r\n    GameInit(){\r\n        this.PlayerSpeed1 = 10;\r\n        this.PlayerSpeed2 = 20;\r\n\r\n        this.RotationSpeed = 1;\r\n        this.ShootSpeed = 10;\r\n        this.BulletSpeed = 1;\r\n        this.BulletLifeTime = 5;\r\n\r\n        this.Skill_1_On = false;\r\n        this.Skill_1_Level = 1;\r\n        this.Skill_1_Time = 5;\r\n        this.Skill_1_Max = 5;\r\n\r\n        this.GameSpeed = 1;\r\n        this.Score = 0;\r\n        this.ItemNum = 0;\r\n\r\n        this.Player.x = 400;\r\n        this.Player.y = 325;\r\n\r\n        this.GameSpeed = 1;\r\n        this.GamePause = false;\r\n\r\n        this.ItemLifeTime1 = 0;\r\n        this.ItemLifeTime2 = 10;\r\n        \r\n\r\n        this.UpdateData();\r\n        this.ItemNum++;\r\n        this.SwapBadItem();\r\n\r\n    },\r\n\r\n    GameOver(){\r\n        this.GamePause = true;\r\n        cc.log('test');\r\n        this.scheduleOnce(function() {\r\n                    this.GameReset();\r\n                    }, 5);\r\n        \r\n    },\r\n\r\n    GameReset(){\r\n        var childernlist = this.node.children;\r\n        //cc.log(this.node.childrenCount);\r\n        for(var i=0;i<this.node.childrenCount;i++){\r\n            cc.log(childernlist[i]);\r\n            childernlist[i].destroy();\r\n        }\r\n\r\n        this.Turret.getComponent('TurretControl').GameReset();\r\n\r\n        this.scheduleOnce(function() {\r\n                    this.GameInit();\r\n                    }, 0.1);\r\n        \r\n\r\n    },\r\n\r\n    start () {\r\n        \r\n    },\r\n\r\n    update (dt) {\r\n        if(this.GamePause)\r\n            this.GameSpeed = 0;\r\n        else{\r\n            if(this.Skill_1_On){\r\n                if (this.Skill_1_Time>0) {\r\n                    this.GameSpeed = 1/(1+this.Skill_1_Level);\r\n                    this.Skill_1_Time -=dt;\r\n                    if(this.Skill_1_Time<0)\r\n                        this.Skill_1_Time = 0;\r\n                    this.UpdateData();\r\n                }\r\n                else{\r\n                    this.GameSpeed = 1;\r\n                    this.Skill_1_Time = 0;\r\n                }\r\n                     \r\n            }\r\n            else{\r\n                this.GameSpeed = 1;\r\n                if(this.Skill_1_Time<this.Skill_1_Max){\r\n                    this.Skill_1_Time+=dt/3;\r\n                    this.UpdateData();\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    UpdateData :function(){\r\n        this.label_PlayerSpeed.string = this.PlayerSpeed2.toString();\r\n        this.label_RotationSpeed.string = this.RotationSpeed.toString();\r\n        this.label_ShootSpeed.string = this.ShootSpeed.toString();\r\n        this.label_BulletSpeed.string = this.BulletSpeed.toString();\r\n        this.label_BulletLifeTime.string = this.BulletLifeTime.toString();\r\n        this.label_Score.string = this.Score.toString();\r\n        var tmp = (Math.floor(this.Skill_1_Time*10)/10).toString();\r\n        if(tmp.length<3)\r\n            tmp+='.0';\r\n        this.label_Skill_1_Time.string = tmp;\r\n    },\r\n\r\n    _getARandomPositon :function(){\r\n        var max,min,x,y;\r\n        do{\r\n            max = 880;\r\n            min = 250;\r\n            x = Math.random()*(max-min+1)+min;\r\n\r\n            max = 600;\r\n            min = 35;\r\n            y = Math.random()*(max-min+1)+min;\r\n            if(this._getDistance(cc.v2(x,y),this.Block1.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block2.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block3.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block4.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Turret.getPosition())<35)\r\n                continue;\r\n            break;\r\n        }while(true);\r\n        \r\n        return cc.v2(x,y);\r\n    },\r\n\r\n    _getDistance: function(pos1, pos2)\r\n    {\r\n        return Math.sqrt(Math.pow(pos1.x - pos2.x, 2) + Math.pow(pos1.y - pos2.y, 2));\r\n    },\r\n\r\n    SwapGoodItem :function(){\r\n        var Itemlist = new Array(this.upPlayerSpeedPrefab,\r\n                                this.upSkill_1_MAXPrefab);\r\n        var i = Math.floor(Math.random()*2);\r\n\r\n        var newItem = cc.instantiate(Itemlist[i]);\r\n\r\n        newItem.parent = this.node;\r\n        var postion= this._getARandomPositon();\r\n        newItem.x = postion.x;\r\n        newItem.y = postion.y;\r\n    },\r\n\r\n    SwapBadItem :function(){\r\n        var Itemlist = new Array(this.upRotationSpeedPrefab,\r\n                                this.upShootSpeedPrefab,\r\n                                this.upBulletSpeedPrefab,\r\n                                this.upBulletLifeTimePrefab);\r\n        var i = Math.floor(Math.random()*4);\r\n\r\n        var newItem = cc.instantiate(Itemlist[i]);\r\n\r\n        newItem.parent = this.node;\r\n        var postion= this._getARandomPositon();\r\n        newItem.x = postion.x;\r\n        newItem.y = postion.y;\r\n    },\r\n\r\n    SwapItem :function(){\r\n        if(this.Score==10){\r\n            this.SwapBadItem();\r\n        }\r\n        if(this.Score==30){\r\n            this.SwapBadItem();\r\n        }\r\n        if((this.Score%5)==0)\r\n            this.SwapGoodItem();\r\n        else\r\n            this.SwapBadItem();\r\n    },\r\n\r\n\r\n    upRotationSpeed: function(){\r\n        this.RotationSpeed+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n    },\r\n\r\n    upShootSpeed: function(){\r\n        this.ShootSpeed+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n    },\r\n\r\n    upBulletSpeed: function(){\r\n        this.BulletSpeed+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n    },\r\n    upBulletLifeTime: function(){\r\n        this.BulletLifeTime+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n    },\r\n\r\n    upPlayerSpeed: function(){\r\n        this.PlayerSpeed2+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n    },\r\n\r\n    upSkill_1_MAX: function(){\r\n        this.Skill_1_Max+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n    },\r\n});\r\n"]}