{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\GameManager.js"],"names":["Common","require","cc","Class","extends","Component","properties","PlayerSpeed1","default","visible","PlayerSpeed2","label_PlayerSpeed","type","Label","Skill_1_On","Skill_1_Level","Skill_1_Time","label_Skill_1_Time","Skill_1_Max","GameSpeed","RotationSpeed","label_RotationSpeed","ShootSpeed","label_ShootSpeed","BulletSpeed","label_BulletSpeed","BulletLifeTime","label_BulletLifeTime","ItemLifeTime1","ItemLifeTime2","Score","label_Score","Block1","Node","Block2","Block3","Block4","upRotationSpeedPrefab","Prefab","onLoad","physicsManager","director","getPhysicsManager","enabled","GameInit","UpdateData","SwapItem","start","update","dt","string","toString","tmp","Math","floor","length","_getARandomPositon","max","min","x","y","random","_getDistance","v2","getPosition","pos1","pos2","sqrt","pow","newItem","instantiate","parent","node","postion","upRotationSpeed","log","ItemType"],"mappings":"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","file":"GameManager.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["var Common = require('GameCommon');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n                            //玩家属性\r\n        PlayerSpeed1 :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        PlayerSpeed2 :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_PlayerSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        Skill_1_On :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        Skill_1_Level :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        Skill_1_Time :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_Skill_1_Time: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        Skill_1_Max :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        GameSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n                            //难度属性\r\n        RotationSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_RotationSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        ShootSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_ShootSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        BulletSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_BulletSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        BulletLifeTime :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_BulletLifeTime: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        ItemLifeTime1: {\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        ItemLifeTime2: {\r\n            default: null,\r\n            visible: false,\r\n        },\r\n\r\n                            //游戏进程\r\n        Score :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_Score: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n                            //\r\n        Block1: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Block2: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        Block3: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        Block4: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n\r\n                            //预构体\r\n        upRotationSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad :function() {\r\n        //开启物理引擎\r\n        this.physicsManager = cc.director.getPhysicsManager();\r\n        this.physicsManager.enabled = true;\r\n\r\n        //初始化游戏参数\r\n        this.GameInit();\r\n     },\r\n\r\n    GameInit(){\r\n        this.PlayerSpeed1 = 10;\r\n        this.PlayerSpeed2 = 20;\r\n\r\n        this.RotationSpeed = 2;\r\n        this.ShootSpeed = 10;\r\n        this.BulletSpeed = 1;\r\n        this.BulletLifeTime = 20;\r\n\r\n        this.Skill_1_On = false;\r\n        this.Skill_1_Level = 1;\r\n        this.Skill_1_Time = 5;\r\n        this.Skill_1_Max = 5;\r\n        this.GameSpeed = 1;\r\n\r\n        this.Score = 0;\r\n\r\n        this.ItemLifeTime1 = 0;\r\n        this.ItemLifeTime2 = 0;\r\n        \r\n\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n    },\r\n\r\n    start () {\r\n        \r\n    },\r\n\r\n    update (dt) {\r\n        if(this.Skill_1_On){\r\n            if (this.Skill_1_Time>0) {\r\n                this.GameSpeed = 1/(1+this.Skill_1_Level);\r\n                this.Skill_1_Time -=dt;\r\n                if(this.Skill_1_Time<0)\r\n                    this.Skill_1_Time = 0;\r\n                this.UpdateData();\r\n            }\r\n            else{\r\n                this.GameSpeed = 1;\r\n                this.Skill_1_Time = 0;\r\n            }\r\n                 \r\n        }\r\n        else{\r\n            this.GameSpeed = 1;\r\n            if(this.Skill_1_Time<this.Skill_1_Max){\r\n                this.Skill_1_Time+=dt/3;\r\n                this.UpdateData();\r\n            }\r\n        }\r\n            \r\n\r\n\r\n    },\r\n\r\n    UpdateData :function(){\r\n        this.label_PlayerSpeed.string = this.PlayerSpeed2.toString();\r\n        this.label_RotationSpeed.string = this.RotationSpeed.toString();\r\n        this.label_ShootSpeed.string = this.ShootSpeed.toString();\r\n        this.label_BulletSpeed.string = this.BulletSpeed.toString();\r\n        this.label_BulletLifeTime.string = this.BulletLifeTime.toString();\r\n        this.label_Score.string = this.Score.toString();\r\n        var tmp = (Math.floor(this.Skill_1_Time*10)/10).toString();\r\n        if(tmp.length<3)\r\n            tmp+='.0';\r\n        this.label_Skill_1_Time.string = tmp;\r\n    },\r\n\r\n    _getARandomPositon :function(){\r\n        var max,min,x,y;\r\n        do{\r\n            max = 880;\r\n            min = 250;\r\n            x = Math.random()*(max-min+1)+min;\r\n\r\n            max = 267;\r\n            min = 33;\r\n            y = Math.random()*(max-min+1)+min;\r\n            if(this._getDistance(cc.v2(x,y),this.Block1.getPosition())<30)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block2.getPosition())<30)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block3.getPosition())<30)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block4.getPosition())<30)\r\n                continue;\r\n            break;\r\n        }while(true);\r\n        \r\n        return cc.v2(x,y);\r\n    },\r\n\r\n    _getDistance: function(pos1, pos2)\r\n    {\r\n        return Math.sqrt(Math.pow(pos1.x - pos2.x, 2) + Math.pow(pos1.y - pos2.y, 2));\r\n    },\r\n\r\n    SwapItem :function(){\r\n        var newItem = cc.instantiate(this.upRotationSpeedPrefab);\r\n\r\n        newItem.parent = this.node;\r\n        var postion= this._getARandomPositon();\r\n        newItem.x = postion.x;\r\n        newItem.y = postion.y;\r\n    },\r\n\r\n\r\n    upRotationSpeed: function(){\r\n        this.RotationSpeed+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n\r\n        cc.log(Common.ItemType[2]);\r\n    },\r\n});\r\n"]}