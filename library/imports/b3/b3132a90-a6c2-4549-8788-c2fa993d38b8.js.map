{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\GameManager.js"],"names":["Common","require","cc","Class","extends","Component","properties","Canvas","default","type","Node","PlayerSpeed1","visible","PlayerSpeed2","PlayerSpeed2UI","label_PlayerSpeed","Label","label_Skill_1_Name","Skill_1_Type","Skill_1_On","Skill_1_Level","Skill_1_Time","label_Skill_1_Time","Skill_1_Max","GameSpeed","GamePause","RotationSpeed","RotationSpeedUi","label_RotationSpeed","BulletScale","BulletScaleUI","ShootSpeed","ShootSpeedUI","label_ShootSpeed","BulletSpeed","BulletSpeedUI","label_BulletSpeed","BulletLifeTime","BulletLifeTimeUI","label_BulletLifeTime","ItemLifeTime1","ItemLifeTime2","Score","ItemNum","label_Score","label_GameOverScore","Player","Turret","Block1","Block2","Block3","Block4","MainMenuUI","GuideUI","ChooseActiveSkillUI","GameOverUI","GameAreaUI","UpdateLogUI","upRotationSpeedPrefab","Prefab","upShootSpeedPrefab","upBulletSpeedPrefab","upBulletLifeTimePrefab","upPlayerSpeedPrefab","upSkill_1_MAXPrefab","GetShieldPrefab","PointRotationSpeedPrefab","PointShootSpeedPrefab","PointBulletSpeedPrefab","PointBulletLifeTimePrefab","PointPlayerSpeedPrefab","PointSkill_1_MAXPrefab","onLoad","physicsManager","director","getPhysicsManager","enabled","active","ChooseActiveSkill","GameInit","RotationSpeedUI","x","y","UpdateData","SwapBadItem","getComponent","GameOver","scheduleOnce","GameReset","childernlist","node","children","i","childrenCount","destroy","string","toString","start","update","dt","ActiveSkillType","SlowTime","tmp","Math","floor","length","_getARandomPositon","max","min","min_distance","max_distance","getPosition","random","_getDistance","v2","pos1","pos2","sqrt","pow","SwapGoodItem","ItemType","Itemlist","Array","HaveShield","newItem","instantiate","parent","postion","SwapItem","createPoint","point_id","pointTarget","Pointlist","newPoint","target","getChildByName","upRotationSpeed","upShootSpeed","upBulletSpeed","upBulletLifeTime","upPlayerSpeed","upSkill_1_MAX","GetShield","Skill_1_Start","Bomb","UseBomb","PlayerPowerFlash","num","color","PlayerPowerFlashEnd","OnPressLabel","OnPressGameGuide","OnPressGameStart"],"mappings":"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","file":"GameManager.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["var Common = require('GameCommon');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Canvas :{\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n                            //玩家属性\r\n        PlayerSpeed1 :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        PlayerSpeed2 :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        PlayerSpeed2UI :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_PlayerSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        label_Skill_1_Name: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        Skill_1_Type :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        Skill_1_On :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        Skill_1_Level :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        Skill_1_Time :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_Skill_1_Time: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        Skill_1_Max :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        GameSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        GamePause :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n                            //难度属性\r\n        RotationSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        RotationSpeedUi :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_RotationSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        BulletScale :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        BulletScaleUI :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n\r\n        ShootSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        ShootSpeedUI :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_ShootSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        BulletSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        BulletSpeedUI :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_BulletSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        BulletLifeTime :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        BulletLifeTimeUI :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_BulletLifeTime: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        ItemLifeTime1: {\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        ItemLifeTime2: {\r\n            default: null,\r\n            visible: false,\r\n        },\r\n\r\n                            //游戏进程\r\n        Score :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        ItemNum :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_Score: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        label_GameOverScore: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        Player: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Turret: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n                            //特定点位\r\n        Block1: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Block2: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        Block3: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        Block4: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n                            //UI\r\n        MainMenuUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GuideUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        ChooseActiveSkillUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameOverUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        GameAreaUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        UpdateLogUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n\r\n                            //预构体\r\n        upRotationSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upShootSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upBulletSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upBulletLifeTimePrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upPlayerSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upSkill_1_MAXPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        GetShieldPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n\r\n        PointRotationSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointShootSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointBulletSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointBulletLifeTimePrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointPlayerSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointSkill_1_MAXPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad :function() {\r\n        //开启物理引擎\r\n        this.physicsManager = cc.director.getPhysicsManager();\r\n        this.physicsManager.enabled = true;\r\n\r\n        this.GameSpeed = 0;\r\n        this.GamePause = true;\r\n        //初始化游戏参数\r\n        this.MainMenuUI.active = true;\r\n        this.GuideUI.active = false;\r\n        this.GameAreaUI.active = false;\r\n        this.ChooseActiveSkillUI.active = false;\r\n        this.GameOverUI.active = false;\r\n        this.UpdateLogUI.active = false;\r\n        //this.GameInit();\r\n    },\r\n\r\n    ChooseActiveSkill :function(){\r\n        this.ChooseActiveSkillUI.active = true;\r\n    },\r\n\r\n    GameInit(){\r\n        this.GameAreaUI.active = true;\r\n        this.PlayerSpeed2UI = 1;\r\n\r\n        this.RotationSpeedUI = 1;\r\n        this.BulletScaleUI = 1;\r\n        this.ShootSpeedUI = 1;\r\n        this.BulletSpeedUI = 1;\r\n        this.BulletLifeTimeUI = 1;\r\n\r\n        this.Skill_1_On = false;\r\n        this.Skill_1_Level = 1;\r\n        this.Skill_1_Time = 5;\r\n        this.Skill_1_Max = 5;\r\n\r\n        this.GameSpeed = 1;\r\n        this.Score = 0;\r\n        this.ItemNum = 0;\r\n\r\n        this.Player.x = -200;\r\n        this.Player.y = 0;\r\n\r\n        this.GameSpeed = 1;\r\n        this.GamePause = false;\r\n\r\n        this.ItemLifeTime1 = 0;\r\n        this.ItemLifeTime2 = 10;\r\n        \r\n\r\n        this.UpdateData();\r\n        this.ItemNum++;\r\n        this.SwapBadItem();\r\n\r\n        this.Turret.getComponent('TurretControl').GameInit();\r\n        this.Player.getComponent('PlayerControl').GameInit();\r\n\r\n    },\r\n\r\n    GameOver(){\r\n        this.GamePause = true;\r\n        this.scheduleOnce(function() {\r\n                    this.GameReset();\r\n                    }, 5);\r\n        \r\n    },\r\n\r\n    GameReset(){\r\n        var childernlist = this.node.children;\r\n        //cc.log(this.node.childrenCount);\r\n        for(var i=0;i<this.node.childrenCount;i++){\r\n            //cc.log(childernlist[i]);\r\n            childernlist[i].destroy();\r\n        }\r\n\r\n        this.Turret.getComponent('TurretControl').GameReset();\r\n        this.GameAreaUI.active = false;\r\n        this.GameOverUI.active = true;\r\n        this.label_GameOverScore.string='得分：'+this.Score.toString();\r\n    },\r\n\r\n    start () {\r\n        \r\n    },\r\n\r\n    update (dt) {\r\n        if(this.GamePause)\r\n            this.GameSpeed = 0;\r\n        else{\r\n            if(!this.Skill_1_On){\r\n                if(this.Skill_1_Time<this.Skill_1_Max){\r\n                        this.Skill_1_Time+=dt/3;\r\n                        this.UpdateData();\r\n                    }\r\n            }\r\n            if(this.Skill_1_Type == Common.ActiveSkillType.SlowTime){\r\n                if(this.Skill_1_On){\r\n                    if (this.Skill_1_Time>0) {\r\n                        this.GameSpeed = 1/(1+this.Skill_1_Level);\r\n                        this.Skill_1_Time -=dt;\r\n                        if(this.Skill_1_Time<0)\r\n                            this.Skill_1_Time = 0;\r\n                        this.UpdateData();\r\n                    }\r\n                    else{\r\n                        this.GameSpeed = 1;\r\n                        this.Skill_1_Time = 0;\r\n                    }\r\n                         \r\n                }\r\n                else{\r\n                    this.GameSpeed = 1;\r\n                }\r\n            }\r\n        }\r\n        //cc.log(this.GameSpeed);\r\n    },\r\n\r\n    UpdateData :function(){\r\n        this.label_PlayerSpeed.string = this.PlayerSpeed2UI.toString();\r\n        this.label_RotationSpeed.string = this.RotationSpeedUI.toString();\r\n        this.label_ShootSpeed.string = this.ShootSpeedUI.toString();\r\n        this.label_BulletSpeed.string = this.BulletSpeedUI.toString();\r\n        this.label_BulletLifeTime.string = this.BulletLifeTimeUI.toString();\r\n        this.label_Score.string = this.Score.toString();\r\n        var tmp = (Math.floor(this.Skill_1_Time*10)/10).toString();\r\n        if(tmp.length<3)\r\n            tmp+='.0';\r\n        this.label_Skill_1_Time.string = tmp;\r\n\r\n        //计算具体参数\r\n\r\n        this.PlayerSpeed2 = (this.PlayerSpeed2UI-1)*2+20;\r\n        this.PlayerSpeed1 = this.PlayerSpeed2/2;\r\n        this.RotationSpeed = 10+this.RotationSpeedUI;\r\n        this.ShootSpeed = 2*15/(15+this.ShootSpeedUI);\r\n        this.BulletSpeed = 200+3*this.BulletSpeedUI;\r\n        this.BulletLifeTime = 4+this.BulletLifeTimeUI*0.5;\r\n        this.BulletScale = 20/(20+this.BulletScaleUI)+0.2\r\n    },\r\n\r\n    _getARandomPositon :function(){\r\n        var max,min,x,y;\r\n        do{\r\n            var min_distance = 20;\r\n            var max_distance = 1000;\r\n\r\n            if(this.Score >= 0 && this.Score < 5){\r\n                min_distance = 100;\r\n                max_distance = 150;\r\n            }\r\n            if(this.Score >= 5 && this.Score < 15)\r\n                {\r\n                min_distance = 150;\r\n                max_distance = 200;\r\n            }\r\n            if(this.Score >= 15 && this.Score < 25)\r\n                {\r\n                min_distance = 200;\r\n                max_distance = 250;\r\n            }\r\n            if(this.Score >= 25 && this.Score < 35)\r\n                {\r\n                min_distance = 250;\r\n                max_distance = 300;\r\n            }\r\n            if(this.Score >= 35 && this.Score < 50)\r\n                {\r\n                min_distance = 300;\r\n                max_distance = 400;\r\n            }\r\n\r\n            max = Math.min(315,this.Player.getPosition().x+max_distance);\r\n            min = Math.max(-315,this.Player.getPosition().x-max_distance);\r\n            x = Math.random()*(max-min+1)+min;\r\n\r\n            max = Math.min(285,this.Player.getPosition().y+max_distance);\r\n            min = Math.max(-285,this.Player.getPosition().y-max_distance);\r\n            y = Math.random()*(max-min+1)+min;\r\n            //是否离4个方块太近\r\n            if(this._getDistance(cc.v2(x,y),this.Block1.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block2.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block3.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block4.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Turret.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Player.getPosition())<min_distance)\r\n                continue;\r\n            break;\r\n        }while(true);\r\n        \r\n        return cc.v2(x,y);\r\n    },\r\n\r\n    _getDistance: function(pos1, pos2)\r\n    {\r\n        return Math.sqrt(Math.pow(pos1.x - pos2.x, 2) + Math.pow(pos1.y - pos2.y, 2));\r\n    },\r\n\r\n    SwapGoodItem :function(ItemType){\r\n        var Itemlist = new Array(this.upPlayerSpeedPrefab,\r\n                                this.upSkill_1_MAXPrefab,\r\n                                this.GetShieldPrefab);\r\n        var i;\r\n        if(this.Player.getComponent('PlayerControl').HaveShield)\r\n            i = Math.floor(Math.random()*2);\r\n        else\r\n            i = Math.floor(Math.random()*3);\r\n\r\n        var newItem;\r\n        if(ItemType == null)\r\n             newItem = cc.instantiate(Itemlist[i]);\r\n         else\r\n            newItem = cc.instantiate(ItemType);\r\n\r\n        newItem.parent = this.node;\r\n        var postion= this._getARandomPositon();\r\n        newItem.x = postion.x;\r\n        newItem.y = postion.y;\r\n    },\r\n\r\n    SwapBadItem :function(){\r\n        var Itemlist = new Array(this.upRotationSpeedPrefab,\r\n                                this.upShootSpeedPrefab,\r\n                                this.upBulletSpeedPrefab,\r\n                                this.upBulletLifeTimePrefab);\r\n        var i = Math.floor(Math.random()*4);\r\n        if(this.Score<4)\r\n            i = this.Score;\r\n\r\n        var newItem = cc.instantiate(Itemlist[i]);\r\n\r\n        newItem.parent = this.node;\r\n        var postion= this._getARandomPositon();\r\n        newItem.x = postion.x;\r\n        newItem.y = postion.y;\r\n    },\r\n\r\n    SwapItem :function(){\r\n        \r\n        if(this.Score==5){\r\n            this.SwapBadItem();\r\n        }\r\n        if(this.Score==15){\r\n            this.SwapBadItem();\r\n        }\r\n        if(this.Score==30){\r\n            this.SwapBadItem();\r\n        }\r\n        if((this.Score%5)==0){\r\n            if(this.Score == 5)\r\n                this.SwapGoodItem(this.GetShieldPrefab);\r\n            else\r\n                this.SwapGoodItem();\r\n        }\r\n        else\r\n            this.SwapBadItem();\r\n    },\r\n\r\n    createPoint(point_id,pointTarget){\r\n        var Pointlist = new Array(this.PointRotationSpeedPrefab,\r\n                                this.PointShootSpeedPrefab,\r\n                                this.PointBulletSpeedPrefab,\r\n                                this.PointBulletLifeTimePrefab,\r\n                                this.PointPlayerSpeedPrefab,\r\n                                this.PointSkill_1_MAXPrefab);\r\n\r\n        var newPoint = cc.instantiate(Pointlist[point_id]);\r\n        newPoint.parent = this.Canvas;\r\n        newPoint.x = this.Player.getPosition().x;\r\n        newPoint.y = this.Player.getPosition().y;\r\n        newPoint.getComponent('PointControl').target = pointTarget.getChildByName(\"1\");\r\n    },\r\n\r\n    upRotationSpeed: function(){\r\n        this.RotationSpeedUI+=1;\r\n        this.BulletScaleUI+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(0,this.label_RotationSpeed.node);\r\n    },\r\n\r\n    upShootSpeed: function(){\r\n        this.ShootSpeedUI+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(1,this.label_ShootSpeed.node);\r\n    },\r\n\r\n    upBulletSpeed: function(){\r\n        this.BulletSpeedUI+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(2,this.label_BulletSpeed.node);\r\n    },\r\n    upBulletLifeTime: function(){\r\n        this.BulletLifeTimeUI+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(3,this.label_BulletLifeTime.node);\r\n    },\r\n\r\n    upPlayerSpeed: function(){\r\n        this.PlayerSpeed2UI+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(4,this.label_PlayerSpeed.node);\r\n    },\r\n\r\n    upSkill_1_MAX: function(){\r\n        this.Skill_1_Max+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(5,this.label_Skill_1_Time.node);\r\n    },\r\n\r\n    GetShield: function(){\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n    },\r\n\r\n    Skill_1_Start: function(){\r\n        if(this.Skill_1_Type == Common.ActiveSkillType.Bomb){\r\n            if(this.Skill_1_Time>=5){\r\n                this.Player.getComponent('PlayerControl').UseBomb();\r\n                this.Skill_1_Time-=5;\r\n                this.UpdateData();\r\n            }\r\n            else\r\n                this.PlayerPowerFlash(3);\r\n        }\r\n    },\r\n\r\n    PlayerPowerFlash: function(num){\r\n        if(num>0){\r\n            this.label_Skill_1_Time.node.color = new cc.color(245,62,62);\r\n            this.scheduleOnce(function() {\r\n                        this.PlayerPowerFlashEnd(num);\r\n                        }, 0.2);\r\n        }\r\n        \r\n    },\r\n\r\n    PlayerPowerFlashEnd: function(num){\r\n        this.label_Skill_1_Time.node.color = new cc.color(255,255,255);\r\n        this.scheduleOnce(function() {\r\n                    this.PlayerPowerFlash(num-1);\r\n                    }, 0.2);\r\n    },\r\n\r\n    OnPressLabel:function(type){\r\n        if(type == 0){\r\n            this.MainMenuUI.active = false;\r\n            this.UpdateLogUI.active = true;\r\n        }\r\n    },\r\n\r\n    OnPressGameGuide: function(){\r\n        this.MainMenuUI.active = false;\r\n        this.GuideUI.active = true;\r\n    },\r\n\r\n    OnPressGameStart: function(){\r\n        this.MainMenuUI.active = false;\r\n        this.ChooseActiveSkill();\r\n    },\r\n});\r\n"]}