{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\TurretControl.js"],"names":["cc","Class","extends","Component","properties","GameManager","default","type","Node","visible","BulletPrefab","Prefab","ShootTimer","BulletParent","onLoad","find","start","GameInit","parent","node","x","y","CreateBullet","GameReset","destroy","update","dt","RotationSpeed","getComponent","GameSpeed","rotation","newBullet","instantiate","BulletSpeed","RigidBody","linearVelocity","v2","pForAngle","Math","PI","BulletScale","scale","ShootSpeed"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAa;AACTC,qBAAS,IADA;AAETC,kBAAMP,GAAGQ,IAFA;AAGTC,qBAAS;AAHA,SADL;;AAORC,sBAAc;AACVJ,qBAAS,IADC;AAEVC,kBAAMP,GAAGW;AAFC,SAPN;AAWRC,oBAAY;AACRN,qBAAS,IADD;AAERG,qBAAS;AAFD,SAXJ;AAeRI,sBAAa;AACTP,qBAAS,IADA;AAETG,qBAAS;AAFA;AAfL,KAHP;;AAwBL;;AAEAK,YAAQ,kBAAW;AACf,aAAKT,WAAL,GAAmBL,GAAGe,IAAH,CAAQ,oBAAR,CAAnB;AACA;AACA,aAAKH,UAAL,GAAkB,GAAlB;AACH,KA9BI;;AAgCLI,SAhCK,mBAgCI,CACR,CAjCI;AAmCLC,YAnCK,sBAmCK;AACN,aAAKJ,YAAL,GAAoB,IAAIb,GAAGQ,IAAP,CAAY,cAAZ,CAApB;AACA,aAAKK,YAAL,CAAkBK,MAAlB,GAA2B,KAAKC,IAAhC;AACA,aAAKN,YAAL,CAAkBO,CAAlB,GAAoB,CAApB;AACA,aAAKP,YAAL,CAAkBQ,CAAlB,GAAoB,CAApB;AACA,aAAKC,YAAL;AACH,KAzCI;;;AA2CLC,eAAW,qBAAU;AACjB,aAAKV,YAAL,CAAkBW,OAAlB;AACH,KA7CI;;AA+CLC,YAAQ,gBAASC,EAAT,EAAa;;AAEjB,YAAIC,gBAAgB,KAAKtB,WAAL,CAAiBuB,YAAjB,CAA8B,aAA9B,EAA6CD,aAAjE;AACAA,wBAAgBA,gBAAgB,KAAKtB,WAAL,CAAiBuB,YAAjB,CAA8B,aAA9B,EAA6CC,SAA7E;AACA,aAAKV,IAAL,CAAUW,QAAV,IAAsBJ,KAAGC,aAAzB;;AAEA,aAAKf,UAAL,IAAmBc,KAAG,KAAKrB,WAAL,CAAiBuB,YAAjB,CAA8B,aAA9B,EAA6CC,SAAnE;AACA,YAAG,KAAKjB,UAAL,IAAiB,CAApB,EAAsB;AAClB,iBAAKU,YAAL;AACH;AAEJ,KA1DI;;AA4DLA,gBA5DK,0BA4DS;AACV,YAAIS,YAAY/B,GAAGgC,WAAH,CAAe,KAAKtB,YAApB,CAAhB;AACAqB,kBAAUX,CAAV,GAAc,CAAd;AACAW,kBAAUV,CAAV,GAAc,CAAd;AACAU,kBAAUb,MAAV,GAAmB,KAAKL,YAAxB;AACA;AACA,YAAIoB,cAAc,KAAK5B,WAAL,CAAiBuB,YAAjB,CAA8B,aAA9B,EAA6CK,WAA/D;AACAF,kBAAUH,YAAV,CAAuB5B,GAAGkC,SAA1B,EAAqCC,cAArC,GAAsDnC,GAAGoC,EAAH,CAAMpC,GAAGqC,SAAH,CAAa,KAAKlB,IAAL,CAAUW,QAAV,GAAmBQ,KAAKC,EAAxB,GAA2B,GAAxC,EAA6ClB,CAA7C,GAA+CY,WAArD,EAAiEjC,GAAGqC,SAAH,CAAa,KAAKlB,IAAL,CAAUW,QAAV,GAAmBQ,KAAKC,EAAxB,GAA2B,GAAxC,EAA6CnB,CAA7C,GAA+Ca,WAAhH,CAAtD;;AAEA,YAAIO,cAAc,KAAKnC,WAAL,CAAiBuB,YAAjB,CAA8B,aAA9B,EAA6CY,WAA/D;AACAT,kBAAUU,KAAV,GAAgBzC,GAAGoC,EAAH,CAAMI,WAAN,EAAkBA,WAAlB,CAAhB;AACA;AACA,YAAIE,aAAa,KAAKrC,WAAL,CAAiBuB,YAAjB,CAA8B,aAA9B,EAA6Cc,UAA9D;AACA,aAAK9B,UAAL,GAAkB8B,UAAlB;AACH;AA1EI,CAAT","file":"TurretControl.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        GameManager: {\r\n            default: null,\r\n            type: cc.Node,\r\n            visible: false,\r\n        },\r\n\r\n        BulletPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        ShootTimer: {\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        BulletParent:{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad :function() {\r\n        this.GameManager = cc.find(\"Canvas/GameManager\");\r\n        //this.GameInit();\r\n        this.ShootTimer = 999;\r\n    },\r\n\r\n    start () {\r\n    },\r\n\r\n    GameInit(){\r\n        this.BulletParent = new cc.Node(\"BulletParent\");\r\n        this.BulletParent.parent = this.node;\r\n        this.BulletParent.x=0;\r\n        this.BulletParent.y=0;\r\n        this.CreateBullet();\r\n    },\r\n\r\n    GameReset :function(){\r\n        this.BulletParent.destroy();\r\n    },\r\n\r\n    update :function(dt) {\r\n\r\n        var RotationSpeed = this.GameManager.getComponent('GameManager').RotationSpeed;\r\n        RotationSpeed = RotationSpeed * this.GameManager.getComponent('GameManager').GameSpeed;\r\n        this.node.rotation += dt*RotationSpeed;\r\n\r\n        this.ShootTimer -= dt*this.GameManager.getComponent('GameManager').GameSpeed;\r\n        if(this.ShootTimer<=0){\r\n            this.CreateBullet();\r\n        }\r\n\r\n    },\r\n\r\n    CreateBullet(){\r\n        var newBullet = cc.instantiate(this.BulletPrefab);\r\n        newBullet.x = 0;\r\n        newBullet.y = 0;\r\n        newBullet.parent = this.BulletParent;\r\n        //子弹速度\r\n        var BulletSpeed = this.GameManager.getComponent('GameManager').BulletSpeed;\r\n        newBullet.getComponent(cc.RigidBody).linearVelocity = cc.v2(cc.pForAngle(this.node.rotation*Math.PI/180).y*BulletSpeed,cc.pForAngle(this.node.rotation*Math.PI/180).x*BulletSpeed);\r\n\r\n        var BulletScale = this.GameManager.getComponent('GameManager').BulletScale;\r\n        newBullet.scale=cc.v2(BulletScale,BulletScale);\r\n        //发射频率\r\n        var ShootSpeed = this.GameManager.getComponent('GameManager').ShootSpeed;\r\n        this.ShootTimer = ShootSpeed;\r\n    }\r\n});"]}