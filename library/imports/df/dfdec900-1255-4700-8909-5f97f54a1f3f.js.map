{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\TurretControl.js"],"names":["cc","Class","extends","Component","properties","GameManager","default","type","Node","visible","BulletPrefab","Prefab","ShootTimer","BulletParent","onLoad","start","find","GameInit","parent","node","x","y","CreateBullet","GameReset","destroy","update","dt","RotationSpeed","getComponent","GameSpeed","rotation","newBullet","instantiate","BulletSpeed","RigidBody","linearVelocity","v2","pForAngle","Math","PI","ShootSpeed"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAa;AACTC,qBAAS,IADA;AAETC,kBAAMP,GAAGQ,IAFA;AAGTC,qBAAS;AAHA,SADL;;AAORC,sBAAc;AACVJ,qBAAS,IADC;AAEVC,kBAAMP,GAAGW;AAFC,SAPN;AAWRC,oBAAY;AACRN,qBAAS,IADD;AAERG,qBAAS;AAFD,SAXJ;AAeRI,sBAAa;AACTP,qBAAS,IADA;AAETG,qBAAS;AAFA;AAfL,KAHP;;AAwBL;;AAEAK,YAAQ,kBAAW,CAElB,CA5BI;;AA8BLC,SA9BK,mBA8BI;AACL,aAAKV,WAAL,GAAmBL,GAAGgB,IAAH,CAAQ,oBAAR,CAAnB;AACA,aAAKC,QAAL;AACH,KAjCI;AAmCLA,YAnCK,sBAmCK;AACN,aAAKJ,YAAL,GAAoB,IAAIb,GAAGQ,IAAP,CAAY,cAAZ,CAApB;AACA,aAAKK,YAAL,CAAkBK,MAAlB,GAA2B,KAAKC,IAAhC;AACA,aAAKN,YAAL,CAAkBO,CAAlB,GAAoB,CAApB;AACA,aAAKP,YAAL,CAAkBQ,CAAlB,GAAoB,CAApB;AACA,aAAKC,YAAL;AACA,aAAKV,UAAL,GAAkB,CAAlB;AACH,KA1CI;;;AA4CLW,eAAW,qBAAU;AACjB,aAAKV,YAAL,CAAkBW,OAAlB;AACA,aAAKP,QAAL;AACH,KA/CI;;AAiDLQ,YAAQ,gBAASC,EAAT,EAAa;;AAEjB,YAAIC,gBAAgB,KAAKtB,WAAL,CAAiBuB,YAAjB,CAA8B,aAA9B,EAA6CD,aAAjE;AACAA,wBAAgB,KAAGA,aAAnB;AACAA,wBAAgBA,gBAAgB,KAAKtB,WAAL,CAAiBuB,YAAjB,CAA8B,aAA9B,EAA6CC,SAA7E;AACA,aAAKV,IAAL,CAAUW,QAAV,IAAsBJ,KAAGC,aAAzB;;AAEA,aAAKf,UAAL,IAAmBc,KAAG,KAAKrB,WAAL,CAAiBuB,YAAjB,CAA8B,aAA9B,EAA6CC,SAAnE;AACA,YAAG,KAAKjB,UAAL,IAAiB,CAApB,EAAsB;AAClB,iBAAKU,YAAL;AACH;AAEJ,KA7DI;;AA+DLA,gBA/DK,0BA+DS;AACV,YAAIS,YAAY/B,GAAGgC,WAAH,CAAe,KAAKtB,YAApB,CAAhB;AACAqB,kBAAUX,CAAV,GAAc,CAAd;AACAW,kBAAUV,CAAV,GAAc,CAAd;AACAU,kBAAUb,MAAV,GAAmB,KAAKL,YAAxB;;AAEA,YAAIoB,cAAc,KAAK5B,WAAL,CAAiBuB,YAAjB,CAA8B,aAA9B,EAA6CK,WAA/D;AACAA,sBAAa,MAAI,IAAEA,WAAnB;AACAF,kBAAUH,YAAV,CAAuB5B,GAAGkC,SAA1B,EAAqCC,cAArC,GAAsDnC,GAAGoC,EAAH,CAAMpC,GAAGqC,SAAH,CAAa,KAAKlB,IAAL,CAAUW,QAAV,GAAmBQ,KAAKC,EAAxB,GAA2B,GAAxC,EAA6ClB,CAA7C,GAA+CY,WAArD,EAAiEjC,GAAGqC,SAAH,CAAa,KAAKlB,IAAL,CAAUW,QAAV,GAAmBQ,KAAKC,EAAxB,GAA2B,GAAxC,EAA6CnB,CAA7C,GAA+Ca,WAAhH,CAAtD;;AAEA,YAAIO,aAAa,KAAKnC,WAAL,CAAiBuB,YAAjB,CAA8B,aAA9B,EAA6CY,UAA9D;AACAA,qBAAa,IAAE,EAAF,IAAM,KAAGA,UAAT,CAAb;AACA,aAAK5B,UAAL,GAAkB4B,UAAlB;AACH;AA5EI,CAAT","file":"TurretControl.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        GameManager: {\r\n            default: null,\r\n            type: cc.Node,\r\n            visible: false,\r\n        },\r\n\r\n        BulletPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        ShootTimer: {\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        BulletParent:{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad :function() {\r\n \r\n    },\r\n\r\n    start () {\r\n        this.GameManager = cc.find(\"Canvas/GameManager\");\r\n        this.GameInit();\r\n    },\r\n\r\n    GameInit(){\r\n        this.BulletParent = new cc.Node(\"BulletParent\");\r\n        this.BulletParent.parent = this.node;\r\n        this.BulletParent.x=0;\r\n        this.BulletParent.y=0;\r\n        this.CreateBullet();\r\n        this.ShootTimer = 0;\r\n    },\r\n\r\n    GameReset :function(){\r\n        this.BulletParent.destroy();\r\n        this.GameInit();\r\n    },\r\n\r\n    update :function(dt) {\r\n\r\n        var RotationSpeed = this.GameManager.getComponent('GameManager').RotationSpeed;\r\n        RotationSpeed = 10+RotationSpeed;\r\n        RotationSpeed = RotationSpeed * this.GameManager.getComponent('GameManager').GameSpeed;\r\n        this.node.rotation += dt*RotationSpeed;\r\n\r\n        this.ShootTimer -= dt*this.GameManager.getComponent('GameManager').GameSpeed;\r\n        if(this.ShootTimer<=0){\r\n            this.CreateBullet();\r\n        }\r\n\r\n    },\r\n\r\n    CreateBullet(){\r\n        var newBullet = cc.instantiate(this.BulletPrefab);\r\n        newBullet.x = 0;\r\n        newBullet.y = 0;\r\n        newBullet.parent = this.BulletParent;\r\n\r\n        var BulletSpeed = this.GameManager.getComponent('GameManager').BulletSpeed;\r\n        BulletSpeed =200+5*BulletSpeed;\r\n        newBullet.getComponent(cc.RigidBody).linearVelocity = cc.v2(cc.pForAngle(this.node.rotation*Math.PI/180).y*BulletSpeed,cc.pForAngle(this.node.rotation*Math.PI/180).x*BulletSpeed);\r\n\r\n        var ShootSpeed = this.GameManager.getComponent('GameManager').ShootSpeed;\r\n        ShootSpeed = 2*10/(10+ShootSpeed)\r\n        this.ShootTimer = ShootSpeed;\r\n    }\r\n});"]}