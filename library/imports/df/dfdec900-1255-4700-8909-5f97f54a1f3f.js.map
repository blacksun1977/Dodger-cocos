{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\TurretControl.js"],"names":["cc","Class","extends","Component","properties","GameManager","default","type","Node","visible","BulletPrefab","Prefab","ShootTimer","onLoad","start","find","CreateBullet","update","dt","RotationSpeed","getComponent","GameSpeed","node","rotation","Rotate","newBullet","instantiate","x","y","parent","BulletSpeed","RigidBody","linearVelocity","v2","pForAngle","Math","PI","ShootSpeed"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAa;AACTC,qBAAS,IADA;AAETC,kBAAMP,GAAGQ,IAFA;AAGTC,qBAAS;AAHA,SADL;;AAORC,sBAAc;AACVJ,qBAAS,IADC;AAEVC,kBAAMP,GAAGW;AAFC,SAPN;AAWRC,oBAAY;AACRN,qBAAS,IADD;AAERG,qBAAS;AAFD;AAXJ,KAHP;;AAoBL;;AAEAI,YAAQ,kBAAW,CAElB,CAxBI;;AA0BLC,SA1BK,mBA0BI;AACL,aAAKT,WAAL,GAAmBL,GAAGe,IAAH,CAAQ,aAAR,CAAnB;AACA,aAAKC,YAAL;AACA,aAAKJ,UAAL,GAAkB,CAAlB;AACH,KA9BI;;;AAgCLK,YAAQ,gBAASC,EAAT,EAAa;;AAEjB,YAAIC,gBAAgB,KAAKd,WAAL,CAAiBe,YAAjB,CAA8B,aAA9B,EAA6CD,aAAjE;AACAA,wBAAgB,KAAGA,aAAnB;AACAA,wBAAgBA,gBAAgB,KAAKd,WAAL,CAAiBe,YAAjB,CAA8B,aAA9B,EAA6CC,SAA7E;AACA,aAAKC,IAAL,CAAUC,QAAV,IAAsBL,KAAGC,aAAzB;;AAEA,aAAKP,UAAL,IAAmBM,KAAG,KAAKb,WAAL,CAAiBe,YAAjB,CAA8B,aAA9B,EAA6CC,SAAnE;AACA,YAAG,KAAKT,UAAL,IAAiB,CAApB,EAAsB;AAClB,iBAAKI,YAAL;AACH;AAEJ,KA5CI;;AA8CLQ,UA9CK,oBA8CG;AACJ;AACA;AACH,KAjDI;AAmDLR,gBAnDK,0BAmDS;AACV,YAAIS,YAAYzB,GAAG0B,WAAH,CAAe,KAAKhB,YAApB,CAAhB;AACAe,kBAAUE,CAAV,GAAc,CAAd;AACAF,kBAAUG,CAAV,GAAc,CAAd;AACAH,kBAAUI,MAAV,GAAmB,KAAKP,IAAxB;;AAEA,YAAIQ,cAAc,KAAKzB,WAAL,CAAiBe,YAAjB,CAA8B,aAA9B,EAA6CU,WAA/D;AACAA,sBAAa,MAAI,KAAGA,WAApB;AACAL,kBAAUL,YAAV,CAAuBpB,GAAG+B,SAA1B,EAAqCC,cAArC,GAAsDhC,GAAGiC,EAAH,CAAMjC,GAAGkC,SAAH,CAAa,KAAKZ,IAAL,CAAUC,QAAV,GAAmBY,KAAKC,EAAxB,GAA2B,GAAxC,EAA6CR,CAA7C,GAA+CE,WAArD,EAAiE9B,GAAGkC,SAAH,CAAa,KAAKZ,IAAL,CAAUC,QAAV,GAAmBY,KAAKC,EAAxB,GAA2B,GAAxC,EAA6CT,CAA7C,GAA+CG,WAAhH,CAAtD;;AAEA,YAAIO,aAAa,KAAKhC,WAAL,CAAiBe,YAAjB,CAA8B,aAA9B,EAA6CiB,UAA9D;AACAA,qBAAa,IAAE,EAAF,IAAM,KAAGA,UAAT,CAAb;AACA,aAAKzB,UAAL,GAAkByB,UAAlB;AACH;AAhEI,CAAT","file":"TurretControl.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        GameManager: {\r\n            default: null,\r\n            type: cc.Node,\r\n            visible: false,\r\n        },\r\n\r\n        BulletPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        ShootTimer: {\r\n            default: null,\r\n            visible: false,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad :function() {\r\n \r\n    },\r\n\r\n    start () {\r\n        this.GameManager = cc.find(\"GameManager\");\r\n        this.CreateBullet();\r\n        this.ShootTimer = 0;\r\n    },\r\n\r\n    update :function(dt) {\r\n\r\n        var RotationSpeed = this.GameManager.getComponent('GameManager').RotationSpeed;\r\n        RotationSpeed = 10+RotationSpeed;\r\n        RotationSpeed = RotationSpeed * this.GameManager.getComponent('GameManager').GameSpeed;\r\n        this.node.rotation += dt*RotationSpeed;\r\n\r\n        this.ShootTimer -= dt*this.GameManager.getComponent('GameManager').GameSpeed;\r\n        if(this.ShootTimer<=0){\r\n            this.CreateBullet();\r\n        }\r\n\r\n    },\r\n\r\n    Rotate(){\r\n        //var action = cc.rotateBy(30);\r\n        //this.node.runAction(action);\r\n    },\r\n\r\n    CreateBullet(){\r\n        var newBullet = cc.instantiate(this.BulletPrefab);\r\n        newBullet.x = 0;\r\n        newBullet.y = 0;\r\n        newBullet.parent = this.node;\r\n\r\n        var BulletSpeed = this.GameManager.getComponent('GameManager').BulletSpeed;\r\n        BulletSpeed =100+10*BulletSpeed;\r\n        newBullet.getComponent(cc.RigidBody).linearVelocity = cc.v2(cc.pForAngle(this.node.rotation*Math.PI/180).y*BulletSpeed,cc.pForAngle(this.node.rotation*Math.PI/180).x*BulletSpeed);\r\n\r\n        var ShootSpeed = this.GameManager.getComponent('GameManager').ShootSpeed;\r\n        ShootSpeed = 2*10/(10+ShootSpeed)\r\n        this.ShootTimer = ShootSpeed;\r\n    }\r\n});\r\n"]}