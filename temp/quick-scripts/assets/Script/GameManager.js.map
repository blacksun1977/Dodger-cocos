{"version":3,"sources":["GameManager.js"],"names":["Common","require","cc","Class","extends","Component","properties","Canvas","default","type","Node","PlayerSpeed1","visible","PlayerSpeed2","label_PlayerSpeed","Label","Skill_1_On","Skill_1_Level","Skill_1_Time","label_Skill_1_Time","Skill_1_Max","GameSpeed","GamePause","RotationSpeed","BulletScale","label_RotationSpeed","ShootSpeed","label_ShootSpeed","BulletSpeed","label_BulletSpeed","BulletLifeTime","label_BulletLifeTime","ItemLifeTime1","ItemLifeTime2","Score","ItemNum","label_Score","label_GameOverScore","Player","Turret","Block1","Block2","Block3","Block4","GuideUI","GameOverUI","upRotationSpeedPrefab","Prefab","upShootSpeedPrefab","upBulletSpeedPrefab","upBulletLifeTimePrefab","upPlayerSpeedPrefab","upSkill_1_MAXPrefab","GetShieldPrefab","PointRotationSpeedPrefab","PointShootSpeedPrefab","PointBulletSpeedPrefab","PointBulletLifeTimePrefab","PointPlayerSpeedPrefab","PointSkill_1_MAXPrefab","onLoad","physicsManager","director","getPhysicsManager","enabled","active","GameInit","getComponent","RigidBody","angularVelocity","rotation","x","y","UpdateData","SwapBadItem","GameOver","scheduleOnce","GameReset","childernlist","node","children","i","childrenCount","destroy","string","toString","start","update","dt","tmp","Math","floor","length","_getARandomPositon","max","min","min_distance","max_distance","getPosition","random","_getDistance","v2","pos1","pos2","sqrt","pow","SwapGoodItem","ItemType","Itemlist","Array","HaveShield","newItem","instantiate","parent","postion","SwapItem","createPoint","point_id","pointTarget","Pointlist","newPoint","log","getChildByName","target","upRotationSpeed","upShootSpeed","upBulletSpeed","upBulletLifeTime","upPlayerSpeed","upSkill_1_MAX","GetShield"],"mappings":"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","file":"GameManager.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["var Common = require('GameCommon');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Canvas :{\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n                            //玩家属性\r\n        PlayerSpeed1 :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        PlayerSpeed2 :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_PlayerSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        Skill_1_On :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        Skill_1_Level :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        Skill_1_Time :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_Skill_1_Time: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        Skill_1_Max :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        GameSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        GamePause :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n                            //难度属性\r\n        RotationSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        BulletScale :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_RotationSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        ShootSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_ShootSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        BulletSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_BulletSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        BulletLifeTime :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_BulletLifeTime: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        ItemLifeTime1: {\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        ItemLifeTime2: {\r\n            default: null,\r\n            visible: false,\r\n        },\r\n\r\n                            //游戏进程\r\n        Score :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        ItemNum :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_Score: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        label_GameOverScore: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        Player: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Turret: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n                            //特定点位\r\n        Block1: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Block2: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        Block3: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        Block4: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n                            //UI\r\n        GuideUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameOverUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n\r\n                            //预构体\r\n        upRotationSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upShootSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upBulletSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upBulletLifeTimePrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upPlayerSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upSkill_1_MAXPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        GetShieldPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n\r\n        PointRotationSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointShootSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointBulletSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointBulletLifeTimePrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointPlayerSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointSkill_1_MAXPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad :function() {\r\n        //开启物理引擎\r\n        this.physicsManager = cc.director.getPhysicsManager();\r\n        this.physicsManager.enabled = true;\r\n\r\n        this.GameSpeed = 0;\r\n        this.GamePause = true;\r\n        //初始化游戏参数\r\n        this.GuideUI.active = true;\r\n        //this.GameInit();\r\n     },\r\n\r\n    GameInit(){\r\n        this.Player.getComponent(cc.RigidBody).angularVelocity = 0;\r\n        this.Player.rotation = 0;\r\n\r\n        this.PlayerSpeed1 = 10;\r\n        this.PlayerSpeed2 = 20;\r\n\r\n        this.RotationSpeed = 1;\r\n        this.BulletScale = 1;\r\n        this.ShootSpeed = 1;\r\n        this.BulletSpeed = 1;\r\n        this.BulletLifeTime = 5;\r\n\r\n        this.Skill_1_On = false;\r\n        this.Skill_1_Level = 1;\r\n        this.Skill_1_Time = 5;\r\n        this.Skill_1_Max = 5;\r\n\r\n        this.GameSpeed = 1;\r\n        this.Score = 0;\r\n        this.ItemNum = 0;\r\n\r\n        this.Player.x = -200;\r\n        this.Player.y = 0;\r\n\r\n        this.GameSpeed = 1;\r\n        this.GamePause = false;\r\n\r\n        this.ItemLifeTime1 = 0;\r\n        this.ItemLifeTime2 = 10;\r\n        \r\n\r\n        this.UpdateData();\r\n        this.ItemNum++;\r\n        this.SwapBadItem();\r\n\r\n        this.Turret.getComponent('TurretControl').GameInit();\r\n\r\n    },\r\n\r\n    GameOver(){\r\n        this.GamePause = true;\r\n        this.scheduleOnce(function() {\r\n                    this.GameReset();\r\n                    }, 5);\r\n        \r\n    },\r\n\r\n    GameReset(){\r\n        var childernlist = this.node.children;\r\n        //cc.log(this.node.childrenCount);\r\n        for(var i=0;i<this.node.childrenCount;i++){\r\n            //cc.log(childernlist[i]);\r\n            childernlist[i].destroy();\r\n        }\r\n\r\n        this.Turret.getComponent('TurretControl').GameReset();\r\n\r\n        this.GameOverUI.active = true;\r\n        this.label_GameOverScore.string='得分：'+this.Score.toString();\r\n    },\r\n\r\n    start () {\r\n        \r\n    },\r\n\r\n    update (dt) {\r\n        if(this.GamePause)\r\n            this.GameSpeed = 0;\r\n        else{\r\n            if(this.Skill_1_On){\r\n                if (this.Skill_1_Time>0) {\r\n                    this.GameSpeed = 1/(1+this.Skill_1_Level);\r\n                    this.Skill_1_Time -=dt;\r\n                    if(this.Skill_1_Time<0)\r\n                        this.Skill_1_Time = 0;\r\n                    this.UpdateData();\r\n                }\r\n                else{\r\n                    this.GameSpeed = 1;\r\n                    this.Skill_1_Time = 0;\r\n                }\r\n                     \r\n            }\r\n            else{\r\n                this.GameSpeed = 1;\r\n                if(this.Skill_1_Time<this.Skill_1_Max){\r\n                    this.Skill_1_Time+=dt/3;\r\n                    this.UpdateData();\r\n                }\r\n            }\r\n        }\r\n        //cc.log(this.GameSpeed);\r\n    },\r\n\r\n    UpdateData :function(){\r\n        this.label_PlayerSpeed.string = this.PlayerSpeed2.toString();\r\n        this.label_RotationSpeed.string = this.RotationSpeed.toString();\r\n        this.label_ShootSpeed.string = this.ShootSpeed.toString();\r\n        this.label_BulletSpeed.string = this.BulletSpeed.toString();\r\n        this.label_BulletLifeTime.string = this.BulletLifeTime.toString();\r\n        this.label_Score.string = this.Score.toString();\r\n        var tmp = (Math.floor(this.Skill_1_Time*10)/10).toString();\r\n        if(tmp.length<3)\r\n            tmp+='.0';\r\n        this.label_Skill_1_Time.string = tmp;\r\n    },\r\n\r\n    _getARandomPositon :function(){\r\n        var max,min,x,y;\r\n        do{\r\n            var min_distance = 20;\r\n            var max_distance = 1000;\r\n\r\n            if(this.Score >= 0 && this.Score < 5){\r\n                min_distance = 100;\r\n                max_distance = 150;\r\n            }\r\n            if(this.Score >= 5 && this.Score < 15)\r\n                {\r\n                min_distance = 150;\r\n                max_distance = 200;\r\n            }\r\n            if(this.Score >= 15 && this.Score < 25)\r\n                {\r\n                min_distance = 200;\r\n                max_distance = 250;\r\n            }\r\n            if(this.Score >= 25 && this.Score < 35)\r\n                {\r\n                min_distance = 250;\r\n                max_distance = 300;\r\n            }\r\n            if(this.Score >= 35 && this.Score < 50)\r\n                {\r\n                min_distance = 300;\r\n                max_distance = 400;\r\n            }\r\n\r\n            max = Math.min(315,this.Player.getPosition().x+max_distance);\r\n            min = Math.max(-315,this.Player.getPosition().x-max_distance);\r\n            x = Math.random()*(max-min+1)+min;\r\n\r\n            max = Math.min(285,this.Player.getPosition().y+max_distance);\r\n            min = Math.max(-285,this.Player.getPosition().y-max_distance);\r\n            y = Math.random()*(max-min+1)+min;\r\n            //是否离4个方块太近\r\n            if(this._getDistance(cc.v2(x,y),this.Block1.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block2.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block3.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block4.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Turret.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Player.getPosition())<min_distance)\r\n                continue;\r\n            break;\r\n        }while(true);\r\n        \r\n        return cc.v2(x,y);\r\n    },\r\n\r\n    _getDistance: function(pos1, pos2)\r\n    {\r\n        return Math.sqrt(Math.pow(pos1.x - pos2.x, 2) + Math.pow(pos1.y - pos2.y, 2));\r\n    },\r\n\r\n    SwapGoodItem :function(ItemType){\r\n        var Itemlist = new Array(this.upPlayerSpeedPrefab,\r\n                                this.upSkill_1_MAXPrefab,\r\n                                this.GetShieldPrefab);\r\n        var i;\r\n        if(this.Player.getComponent('PlayerControl').HaveShield)\r\n            i = Math.floor(Math.random()*2);\r\n        else\r\n            i = Math.floor(Math.random()*3);\r\n\r\n        var newItem;\r\n        if(ItemType == null)\r\n             newItem = cc.instantiate(Itemlist[i]);\r\n         else\r\n            newItem = cc.instantiate(ItemType);\r\n\r\n        newItem.parent = this.node;\r\n        var postion= this._getARandomPositon();\r\n        newItem.x = postion.x;\r\n        newItem.y = postion.y;\r\n    },\r\n\r\n    SwapBadItem :function(){\r\n        var Itemlist = new Array(this.upRotationSpeedPrefab,\r\n                                this.upShootSpeedPrefab,\r\n                                this.upBulletSpeedPrefab,\r\n                                this.upBulletLifeTimePrefab);\r\n        var i = Math.floor(Math.random()*4);\r\n        if(this.Score<4)\r\n            i = this.Score;\r\n\r\n        var newItem = cc.instantiate(Itemlist[i]);\r\n\r\n        newItem.parent = this.node;\r\n        var postion= this._getARandomPositon();\r\n        newItem.x = postion.x;\r\n        newItem.y = postion.y;\r\n    },\r\n\r\n    SwapItem :function(){\r\n        \r\n        if(this.Score==5){\r\n            this.SwapBadItem();\r\n        }\r\n        if(this.Score==15){\r\n            this.SwapBadItem();\r\n        }\r\n        if(this.Score==30){\r\n            this.SwapBadItem();\r\n        }\r\n        if((this.Score%5)==0){\r\n            if(this.Score == 5)\r\n                this.SwapGoodItem(this.GetShieldPrefab);\r\n            else\r\n                this.SwapGoodItem();\r\n        }\r\n        else\r\n            this.SwapBadItem();\r\n    },\r\n\r\n    createPoint(point_id,pointTarget){\r\n        var Pointlist = new Array(this.PointRotationSpeedPrefab,\r\n                                this.PointShootSpeedPrefab,\r\n                                this.PointBulletSpeedPrefab,\r\n                                this.PointBulletLifeTimePrefab,\r\n                                this.PointPlayerSpeedPrefab,\r\n                                this.PointSkill_1_MAXPrefab);\r\n\r\n        var newPoint = cc.instantiate(Pointlist[point_id]);\r\n        newPoint.parent = this.Canvas;\r\n        newPoint.x = this.Player.getPosition().x;\r\n        newPoint.y = this.Player.getPosition().y;\r\n        cc.log(pointTarget);\r\n        cc.log(pointTarget.getChildByName(\"1\"));\r\n        newPoint.getComponent('PointControl').target = pointTarget.getChildByName(\"1\");\r\n    },\r\n\r\n    upRotationSpeed: function(){\r\n        this.RotationSpeed+=2;\r\n        this.BulletScale+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(0,this.label_RotationSpeed.node);\r\n    },\r\n\r\n    upShootSpeed: function(){\r\n        this.ShootSpeed+=2;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(1,this.label_ShootSpeed.node);\r\n    },\r\n\r\n    upBulletSpeed: function(){\r\n        this.BulletSpeed+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(2,this.label_BulletSpeed.node);\r\n    },\r\n    upBulletLifeTime: function(){\r\n        this.BulletLifeTime+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(3,this.label_BulletLifeTime.node);\r\n    },\r\n\r\n    upPlayerSpeed: function(){\r\n        this.PlayerSpeed2+=2;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(4,this.label_PlayerSpeed.node);\r\n    },\r\n\r\n    upSkill_1_MAX: function(){\r\n        this.Skill_1_Max+=2;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(5,this.label_Skill_1_Time.node);\r\n    },\r\n\r\n    GetShield: function(){\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n    },\r\n});\r\n"]}