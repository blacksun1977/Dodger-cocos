{"version":3,"sources":["GameManager.js"],"names":["Common","require","cc","Class","extends","Component","properties","Canvas","default","type","Node","PlayerSpeed1","visible","PlayerSpeed2","label_PlayerSpeed","Label","Skill_1_On","Skill_1_Level","Skill_1_Time","label_Skill_1_Time","Skill_1_Max","GameSpeed","GamePause","RotationSpeed","label_RotationSpeed","ShootSpeed","label_ShootSpeed","BulletSpeed","label_BulletSpeed","BulletLifeTime","label_BulletLifeTime","ItemLifeTime1","ItemLifeTime2","Score","ItemNum","label_Score","Player","Turret","Block1","Block2","Block3","Block4","upRotationSpeedPrefab","Prefab","upShootSpeedPrefab","upBulletSpeedPrefab","upBulletLifeTimePrefab","upPlayerSpeedPrefab","upSkill_1_MAXPrefab","GetShieldPrefab","PointRotationSpeedPrefab","PointShootSpeedPrefab","PointBulletSpeedPrefab","PointBulletLifeTimePrefab","PointPlayerSpeedPrefab","PointSkill_1_MAXPrefab","onLoad","physicsManager","director","getPhysicsManager","enabled","GameInit","getComponent","RigidBody","angularVelocity","rotation","x","y","UpdateData","SwapBadItem","GameOver","scheduleOnce","GameReset","childernlist","node","children","i","childrenCount","destroy","start","update","dt","string","toString","tmp","Math","floor","length","_getARandomPositon","max","min","min_distance","max_distance","getPosition","random","_getDistance","v2","pos1","pos2","sqrt","pow","SwapGoodItem","ItemType","Itemlist","Array","HaveShield","newItem","instantiate","parent","postion","SwapItem","createPoint","point_id","pointTarget","Pointlist","newPoint","log","getChildByName","target","upRotationSpeed","upShootSpeed","upBulletSpeed","upBulletLifeTime","upPlayerSpeed","upSkill_1_MAX","GetShield"],"mappings":"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","file":"GameManager.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["var Common = require('GameCommon');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Canvas :{\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n                            //玩家属性\r\n        PlayerSpeed1 :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        PlayerSpeed2 :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_PlayerSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        Skill_1_On :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        Skill_1_Level :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        Skill_1_Time :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_Skill_1_Time: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        Skill_1_Max :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        GameSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        GamePause :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n                            //难度属性\r\n        RotationSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_RotationSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        ShootSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_ShootSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        BulletSpeed :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_BulletSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        BulletLifeTime :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_BulletLifeTime: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        ItemLifeTime1: {\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        ItemLifeTime2: {\r\n            default: null,\r\n            visible: false,\r\n        },\r\n\r\n                            //游戏进程\r\n        Score :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        ItemNum :{\r\n            default: null,\r\n            visible: false,\r\n        },\r\n        label_Score: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        Player: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Turret: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n                            //特定点位\r\n        Block1: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Block2: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        Block3: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        Block4: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n\r\n                            //预构体\r\n        upRotationSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upShootSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upBulletSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upBulletLifeTimePrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upPlayerSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upSkill_1_MAXPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        GetShieldPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n\r\n        PointRotationSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointShootSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointBulletSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointBulletLifeTimePrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointPlayerSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointSkill_1_MAXPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad :function() {\r\n        //开启物理引擎\r\n        this.physicsManager = cc.director.getPhysicsManager();\r\n        this.physicsManager.enabled = true;\r\n\r\n        //初始化游戏参数\r\n        this.GameInit();\r\n     },\r\n\r\n    GameInit(){\r\n        this.Player.getComponent(cc.RigidBody).angularVelocity = 0;\r\n        this.Player.rotation = 0;\r\n\r\n        this.PlayerSpeed1 = 10;\r\n        this.PlayerSpeed2 = 20;\r\n\r\n        this.RotationSpeed = 1;\r\n        this.ShootSpeed = 1;\r\n        this.BulletSpeed = 1;\r\n        this.BulletLifeTime = 5;\r\n\r\n        this.Skill_1_On = false;\r\n        this.Skill_1_Level = 1;\r\n        this.Skill_1_Time = 5;\r\n        this.Skill_1_Max = 5;\r\n\r\n        this.GameSpeed = 1;\r\n        this.Score = 0;\r\n        this.ItemNum = 0;\r\n\r\n        this.Player.x = -200;\r\n        this.Player.y = 0;\r\n\r\n        this.GameSpeed = 1;\r\n        this.GamePause = false;\r\n\r\n        this.ItemLifeTime1 = 0;\r\n        this.ItemLifeTime2 = 10;\r\n        \r\n\r\n        this.UpdateData();\r\n        this.ItemNum++;\r\n        this.SwapBadItem();\r\n\r\n    },\r\n\r\n    GameOver(){\r\n        this.GamePause = true;\r\n        this.scheduleOnce(function() {\r\n                    this.GameReset();\r\n                    }, 5);\r\n        \r\n    },\r\n\r\n    GameReset(){\r\n        var childernlist = this.node.children;\r\n        //cc.log(this.node.childrenCount);\r\n        for(var i=0;i<this.node.childrenCount;i++){\r\n            //cc.log(childernlist[i]);\r\n            childernlist[i].destroy();\r\n        }\r\n\r\n        this.Turret.getComponent('TurretControl').GameReset();\r\n\r\n        this.scheduleOnce(function() {\r\n                    this.GameInit();\r\n                    }, 0.1);\r\n        \r\n\r\n    },\r\n\r\n    start () {\r\n        \r\n    },\r\n\r\n    update (dt) {\r\n        if(this.GamePause)\r\n            this.GameSpeed = 0;\r\n        else{\r\n            if(this.Skill_1_On){\r\n                if (this.Skill_1_Time>0) {\r\n                    this.GameSpeed = 1/(1+this.Skill_1_Level);\r\n                    this.Skill_1_Time -=dt;\r\n                    if(this.Skill_1_Time<0)\r\n                        this.Skill_1_Time = 0;\r\n                    this.UpdateData();\r\n                }\r\n                else{\r\n                    this.GameSpeed = 1;\r\n                    this.Skill_1_Time = 0;\r\n                }\r\n                     \r\n            }\r\n            else{\r\n                this.GameSpeed = 1;\r\n                if(this.Skill_1_Time<this.Skill_1_Max){\r\n                    this.Skill_1_Time+=dt/3;\r\n                    this.UpdateData();\r\n                }\r\n            }\r\n        }\r\n        //cc.log(this.GameSpeed);\r\n    },\r\n\r\n    UpdateData :function(){\r\n        this.label_PlayerSpeed.string = this.PlayerSpeed2.toString();\r\n        this.label_RotationSpeed.string = this.RotationSpeed.toString();\r\n        this.label_ShootSpeed.string = this.ShootSpeed.toString();\r\n        this.label_BulletSpeed.string = this.BulletSpeed.toString();\r\n        this.label_BulletLifeTime.string = this.BulletLifeTime.toString();\r\n        this.label_Score.string = this.Score.toString();\r\n        var tmp = (Math.floor(this.Skill_1_Time*10)/10).toString();\r\n        if(tmp.length<3)\r\n            tmp+='.0';\r\n        this.label_Skill_1_Time.string = tmp;\r\n    },\r\n\r\n    _getARandomPositon :function(){\r\n        var max,min,x,y;\r\n        do{\r\n            var min_distance = 20;\r\n            var max_distance = 1000;\r\n\r\n            if(this.Score >= 0 && this.Score < 5){\r\n                min_distance = 100;\r\n                max_distance = 150;\r\n            }\r\n            if(this.Score >= 5 && this.Score < 15)\r\n                {\r\n                min_distance = 150;\r\n                max_distance = 200;\r\n            }\r\n            if(this.Score >= 15 && this.Score < 25)\r\n                {\r\n                min_distance = 200;\r\n                max_distance = 250;\r\n            }\r\n            if(this.Score >= 25 && this.Score < 35)\r\n                {\r\n                min_distance = 250;\r\n                max_distance = 300;\r\n            }\r\n            if(this.Score >= 35 && this.Score < 50)\r\n                {\r\n                min_distance = 300;\r\n                max_distance = 400;\r\n            }\r\n\r\n            max = Math.min(315,this.Player.getPosition().x+max_distance);\r\n            min = Math.max(-315,this.Player.getPosition().x-max_distance);\r\n            x = Math.random()*(max-min+1)+min;\r\n\r\n            max = Math.min(285,this.Player.getPosition().y+max_distance);\r\n            min = Math.max(-285,this.Player.getPosition().y-max_distance);\r\n            y = Math.random()*(max-min+1)+min;\r\n            //是否离4个方块太近\r\n            if(this._getDistance(cc.v2(x,y),this.Block1.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block2.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block3.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block4.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Turret.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Player.getPosition())<min_distance)\r\n                continue;\r\n            break;\r\n        }while(true);\r\n        \r\n        return cc.v2(x,y);\r\n    },\r\n\r\n    _getDistance: function(pos1, pos2)\r\n    {\r\n        return Math.sqrt(Math.pow(pos1.x - pos2.x, 2) + Math.pow(pos1.y - pos2.y, 2));\r\n    },\r\n\r\n    SwapGoodItem :function(ItemType){\r\n        var Itemlist = new Array(this.upPlayerSpeedPrefab,\r\n                                this.upSkill_1_MAXPrefab,\r\n                                this.GetShieldPrefab);\r\n        var i;\r\n        if(this.Player.getComponent('PlayerControl').HaveShield)\r\n            i = Math.floor(Math.random()*2);\r\n        else\r\n            i = Math.floor(Math.random()*3);\r\n\r\n        var newItem;\r\n        if(ItemType == null)\r\n             newItem = cc.instantiate(Itemlist[i]);\r\n         else\r\n            newItem = cc.instantiate(ItemType);\r\n\r\n        newItem.parent = this.node;\r\n        var postion= this._getARandomPositon();\r\n        newItem.x = postion.x;\r\n        newItem.y = postion.y;\r\n    },\r\n\r\n    SwapBadItem :function(){\r\n        var Itemlist = new Array(this.upRotationSpeedPrefab,\r\n                                this.upShootSpeedPrefab,\r\n                                this.upBulletSpeedPrefab,\r\n                                this.upBulletLifeTimePrefab);\r\n        var i = Math.floor(Math.random()*4);\r\n        if(this.Score<4)\r\n            i = this.Score;\r\n\r\n        var newItem = cc.instantiate(Itemlist[i]);\r\n\r\n        newItem.parent = this.node;\r\n        var postion= this._getARandomPositon();\r\n        newItem.x = postion.x;\r\n        newItem.y = postion.y;\r\n    },\r\n\r\n    SwapItem :function(){\r\n        \r\n        if(this.Score==5){\r\n            this.SwapBadItem();\r\n        }\r\n        if(this.Score==15){\r\n            this.SwapBadItem();\r\n        }\r\n        if(this.Score==30){\r\n            this.SwapBadItem();\r\n        }\r\n        if((this.Score%5)==0){\r\n            if(this.Score == 5)\r\n                this.SwapGoodItem(this.GetShieldPrefab);\r\n            else\r\n                this.SwapGoodItem();\r\n        }\r\n        else\r\n            this.SwapBadItem();\r\n    },\r\n\r\n    createPoint(point_id,pointTarget){\r\n        var Pointlist = new Array(this.PointRotationSpeedPrefab,\r\n                                this.PointShootSpeedPrefab,\r\n                                this.PointBulletSpeedPrefab,\r\n                                this.PointBulletLifeTimePrefab,\r\n                                this.PointPlayerSpeedPrefab,\r\n                                this.PointSkill_1_MAXPrefab);\r\n\r\n        var newPoint = cc.instantiate(Pointlist[point_id]);\r\n        newPoint.parent = this.Canvas;\r\n        newPoint.x = this.Player.getPosition().x;\r\n        newPoint.y = this.Player.getPosition().y;\r\n        cc.log(pointTarget);\r\n        cc.log(pointTarget.getChildByName(\"1\"));\r\n        newPoint.getComponent('PointControl').target = pointTarget.getChildByName(\"1\");\r\n    },\r\n\r\n    upRotationSpeed: function(){\r\n        this.RotationSpeed+=2;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(0,this.label_RotationSpeed.node);\r\n    },\r\n\r\n    upShootSpeed: function(){\r\n        this.ShootSpeed+=2;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(1,this.label_ShootSpeed.node);\r\n    },\r\n\r\n    upBulletSpeed: function(){\r\n        this.BulletSpeed+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(2,this.label_BulletSpeed.node);\r\n    },\r\n    upBulletLifeTime: function(){\r\n        this.BulletLifeTime+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(3,this.label_BulletLifeTime.node);\r\n    },\r\n\r\n    upPlayerSpeed: function(){\r\n        this.PlayerSpeed2+=2;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(4,this.label_PlayerSpeed.node);\r\n    },\r\n\r\n    upSkill_1_MAX: function(){\r\n        this.Skill_1_Max+=2;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(5,this.label_Skill_1_Time.node);\r\n    },\r\n\r\n    GetShield: function(){\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n    },\r\n});\r\n"]}