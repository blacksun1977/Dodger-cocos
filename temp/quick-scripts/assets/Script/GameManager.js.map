{"version":3,"sources":["GameManager.js"],"names":["Common","require","cc","Class","extends","Component","properties","Canvas","default","type","Node","label_PlayerSpeed","Label","label_Skill_1_Name","label_Skill_1_Time","label_RotationSpeed","label_ShootSpeed","label_BulletSpeed","label_BulletLifeTime","label_Score","label_GameOverScore","Player","Turret","Block1","Block2","Block3","Block4","MainMenuUI","GuideUI","GameSetUI","GameOverUI","GameAreaUI","GameRankUI","UpdateLogUI","JoyUI","SkillButton1","SkillButton2","SkillButton3","LevelNumUI","UseEnergyBarUI","Toggle","upRotationSpeedPrefab","Prefab","upShootSpeedPrefab","upBulletSpeedPrefab","upBulletLifeTimePrefab","upPlayerSpeedPrefab","upSkill_1_MAXPrefab","GetShieldPrefab","PointRotationSpeedPrefab","PointShootSpeedPrefab","PointBulletSpeedPrefab","PointBulletLifeTimePrefab","PointPlayerSpeedPrefab","PointSkill_1_MAXPrefab","onLoad","physicsManager","director","getPhysicsManager","enabled","GameSpeed","GamePause","CanClick","active","SetPara","ActiveSkill0Energy","ActiveSkill1Energy","ActiveSkill2Energy","PassiveSkill1Energy","ChooseActiveSkill","LevelNum","Math","floor","random","string","GameInit","PlayerSpeed2UI","RotationSpeedUI","ShootSpeedUI","BulletSpeedUI","BulletLifeTimeUI","Skill_1_On","Skill_1_Active","Skill_1_Level","Skill_1_Time","Skill_1_Max","PlayerSlow","Score","ItemNum","x","y","ItemLifeTime1","ItemLifeTime2","UpdateData","SwapBadItem","UseEnergyBar","isChecked","UseJoy","UseDevice","UseTouch","getComponent","node","GameOver","scheduleOnce","PlayerDead","Die","GameReset","childernlist","children","i","childrenCount","destroy","toString","SubmitScore","GetFirendRank","start","update","dt","PlayerSpeedNow","RigidBody","linearVelocity","TheWorldTime","ResumeSpeed","TheWorldEnd","PlayerNotMove","Skill_1_Type","ActiveSkillNum","SlowTime","tmp","length","EnergyBar","PlayerSpeed2","log","PlayerSpeed1","RotationSpeed","ShootSpeed","BulletSpeed","BulletLifeTime","BulletScale","_getARandomPositon","postion","min_distance_input","max_distance_input","max","min","min_distance","max_distance","count","v2","_getDistance","getPosition","pos1","pos2","sqrt","pow","SwapGoodItemSingle","ItemType","newItem","instantiate","parent","Init","SwapGoodItem","Itemlist","Array","newItem1","newItem2","HaveShield","postion1","postion2","SwapItem","createPoint","point_id","pointTarget","Pointlist","newPoint","target","getChildByName","upRotationSpeed","upShootSpeed","upBulletSpeed","upBulletLifeTime","upPlayerSpeed","upSkill_1_MAX","GetShield","Skill_1_Start","Bomb","UseBomb","PlayerPowerFlash","EnergyBarFlash","TheWorldStart","num","color","PlayerPowerFlashEnd","OnPressLabel","OnPressGameGuide","OnPressGameStart","OnPressGameSettingOk","Skill_2_Type","OnPressGameRank","OnPressShare","window","wx","shareAppMessage","testDate","Date","CC_WECHATGAME","postMessage","messageType","MessageType","SubmitData","MAIN_MENU_NUM","Data"],"mappings":"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","file":"GameManager.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["var Common = require('GameCommon');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        Canvas :{\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n                            //玩家属性\r\n        label_PlayerSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        label_Skill_1_Name: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        label_Skill_1_Time: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n                            //难度属性\r\n\r\n        label_RotationSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        label_ShootSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        label_BulletSpeed: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n        label_BulletLifeTime: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n\r\n                            //游戏进程\r\n        label_Score: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        label_GameOverScore: {\r\n            default: null,\r\n            type: cc.Label,\r\n        },\r\n        Player: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Turret: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n                            //特定点位\r\n        Block1: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        Block2: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        Block3: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        Block4: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n                            //UI\r\n        MainMenuUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GuideUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameSetUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        GameOverUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        GameAreaUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        GameRankUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n        UpdateLogUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        }, \r\n\r\n                            //UI\r\n        JoyUI: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n\r\n        SkillButton1: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        SkillButton2: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        SkillButton3: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        LevelNumUI: {\r\n            default: null,\r\n            type: cc.Label,\r\n        }, \r\n                            //按钮\r\n        UseEnergyBarUI: {\r\n            default: null,\r\n            type: cc.Toggle,\r\n        }, \r\n\r\n                            //预构体\r\n        upRotationSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upShootSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upBulletSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upBulletLifeTimePrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upPlayerSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        upSkill_1_MAXPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        GetShieldPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n\r\n        PointRotationSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointShootSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointBulletSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointBulletLifeTimePrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointPlayerSpeedPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n        PointSkill_1_MAXPrefab: {\r\n            default: null,\r\n            type: cc.Prefab,\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad :function() {\r\n        //开启物理引擎\r\n        this.physicsManager = cc.director.getPhysicsManager();\r\n        this.physicsManager.enabled = true;\r\n        //this.node.getComponent('DeviceMotionControl').Prepare();\r\n\r\n        this.GameSpeed = 0;\r\n        this.GamePause = true;\r\n        this.CanClick = true;\r\n        //初始化游戏参数\r\n        this.MainMenuUI.active = true;\r\n        this.GuideUI.active = false;\r\n        this.GameAreaUI.active = false;\r\n        this.GameSetUI.active = false;\r\n        this.GameOverUI.active = false;\r\n        this.GameRankUI.active = false;\r\n        this.UpdateLogUI.active = false;\r\n        //this.GameInit();\r\n        this.SetPara();\r\n\r\n    },\r\n\r\n    SetPara: function(){\r\n        //减速\r\n        this.ActiveSkill0Energy = 1;\r\n        //炸弹\r\n        this.ActiveSkill1Energy = 5;\r\n        //停止\r\n        this.ActiveSkill2Energy = 5;\r\n\r\n        //保险\r\n        this.PassiveSkill1Energy = 3;\r\n    },\r\n\r\n    ChooseActiveSkill :function(){\r\n        this.GameAreaUI.active = false;\r\n        this.GameSetUI.active = true;\r\n        if(this.LevelNum == null)\r\n        \tthis.LevelNum = 0;\r\n        else\r\n        \tthis.LevelNum = Math.floor(Math.random()*4);\r\n        if(this.LevelNum==0){\r\n        \tthis.LevelNumUI.string='本次游戏难度倾向：平衡';\r\n        }\r\n        if(this.LevelNum==1){\r\n        \tthis.LevelNumUI.string='本次游戏难度倾向：炮台射速快';\r\n        }\r\n        if(this.LevelNum==2){\r\n        \tthis.LevelNumUI.string='本次游戏难度倾向：子弹速度快';\r\n        }\r\n        if(this.LevelNum==3){\r\n        \tthis.LevelNumUI.string='本次游戏难度倾向：子弹时间长';\r\n        }\r\n    },\r\n\r\n    GameInit(){\r\n        this.GameAreaUI.active = true;\r\n        this.PlayerSpeed2UI = 1;\r\n\r\n        this.RotationSpeedUI = 1;\r\n        this.ShootSpeedUI = 1;\r\n        this.BulletSpeedUI = 1;\r\n        this.BulletLifeTimeUI = 1;\r\n\r\n        this.Skill_1_On = false;\r\n        this.Skill_1_Active = false;\r\n        this.Skill_1_Level = 1;\r\n        this.Skill_1_Time = 10;\r\n        this.Skill_1_Max = 10;\r\n\r\n        this.GameSpeed = 1;\r\n        this.PlayerSlow = 1;\r\n        this.Score = 0;\r\n        this.ItemNum = 1;\r\n\r\n        this.Player.x = -200;\r\n        this.Player.y = 0;\r\n\r\n        this.GameSpeed = 1;\r\n        this.GamePause = false;\r\n        this.CanClick = true;\r\n\r\n        this.ItemLifeTime1 = 0;\r\n        this.ItemLifeTime2 = 0;\r\n        \r\n\r\n        this.UpdateData();\r\n        this.SwapBadItem();\r\n        //this.SwapGoodItem();\r\n\r\n        this.UseEnergyBar = this.UseEnergyBarUI.isChecked;\r\n        this.UseJoy = true;\r\n        this.UseDevice = false;\r\n        this.UseTouch = false;\r\n\r\n        this.Turret.getComponent('TurretControl').GameInit();\r\n        this.Player.getComponent('PlayerControl').GameInit();\r\n        this.node.getComponent('DeviceMotionControl').GameInit();\r\n\r\n        if(this.UseJoy){\r\n            this.JoyUI.active =true;\r\n            this.SkillButton1.active = true;\r\n        }\r\n        else{\r\n            this.JoyUI.active =false;\r\n            this.SkillButton1.active = false;\r\n        }\r\n        if(this.UseDevice)\r\n            this.SkillButton2.active = true;\r\n        else\r\n            this.SkillButton2.active = false;\r\n        if(this.UseTouch)\r\n            this.SkillButton3.active = true;\r\n        else\r\n            this.SkillButton3.active = false;\r\n    },\r\n\r\n    GameOver(){\r\n        this.GamePause = true;\r\n        this.scheduleOnce(function() {\r\n                    this.PlayerDead();\r\n                    }, 1);\r\n    },\r\n\r\n    PlayerDead(){\r\n        this.Player.getComponent('PlayerControl').Die();\r\n        this.scheduleOnce(function() {\r\n                    this.GameReset();\r\n                    }, 1);\r\n    },\r\n\r\n    GameReset(){\r\n        var childernlist = this.node.children;\r\n        //cc.log(this.node.childrenCount);\r\n        for(var i=0;i<this.node.childrenCount;i++){\r\n            //cc.log(childernlist[i]);\r\n            childernlist[i].destroy();\r\n        }\r\n\r\n        this.Turret.getComponent('TurretControl').GameReset();\r\n        //this.GameAreaUI.active = false;\r\n        this.GameOverUI.active = true;\r\n        this.label_GameOverScore.string='得分：'+this.Score.toString();\r\n        this.GameRankUI.active = true;\r\n        \r\n        this.SubmitScore();\r\n        this.GameRankUI.getComponent('GameRankControl').GetFirendRank();\r\n        this.CanClick = false;\r\n    },\r\n\r\n    start () {\r\n        \r\n    },\r\n\r\n    update (dt) {\r\n        if(this.GamePause)\r\n            this.GameSpeed = 0;\r\n        else{\r\n            let PlayerSpeedNow = this.Player.getComponent(cc.RigidBody).linearVelocity;\r\n\r\n            if(this.TheWorldTime>0){\r\n                this.TheWorldTime-=dt;\r\n                if(this.TheWorldTime<=0){\r\n                    this.ResumeSpeed = true;\r\n                    this.Player.getComponent('PlayerControl').TheWorldEnd();\r\n                }\r\n            }\r\n\r\n            if(PlayerSpeedNow.x == 0 && PlayerSpeedNow.y == 0)\r\n                this.PlayerNotMove = true;\r\n            else{\r\n                this.PlayerNotMove = false;\r\n            }\r\n\r\n            if(!this.Skill_1_On){\r\n                if(this.Skill_1_Time<this.Skill_1_Max){\r\n                        this.Skill_1_Time+=dt/2*this.GameSpeed;\r\n                        this.UpdateData();\r\n                    }\r\n            }\r\n            if(this.Skill_1_Type == Common.ActiveSkillNum.SlowTime){\r\n                if(this.Skill_1_On){\r\n                    if (this.Skill_1_Time>0) {\r\n                        this.Skill_1_Active = true;\r\n                        this.GameSpeed = 1;\r\n                        this.Skill_1_Time -=dt*this.ActiveSkill0Energy;\r\n                        if(this.Skill_1_Time<0)\r\n                            this.Skill_1_Time = 0;\r\n                        this.UpdateData();\r\n                    }\r\n                    else{\r\n                        this.Skill_1_Active = false;\r\n                        this.GameSpeed = 1;\r\n                        this.Skill_1_Time = 0;\r\n                    }\r\n                         \r\n                }\r\n                else{\r\n                    this.Skill_1_Active = false;\r\n                    this.GameSpeed = 1;\r\n                }\r\n            }\r\n            if(this.Skill_1_Type == 2 && this.ResumeSpeed == true){\r\n                if(this.GameSpeed<1)\r\n                    this.GameSpeed +=dt/2;\r\n                else{\r\n                    this.ResumeSpeed = false;\r\n                }\r\n            }\r\n        }\r\n        //cc.log(this.GameSpeed);\r\n    },\r\n\r\n    UpdateData :function(){\r\n        //更新UI数据\r\n        this.label_PlayerSpeed.string = this.PlayerSpeed2UI.toString();\r\n        this.label_RotationSpeed.string = this.RotationSpeedUI.toString();\r\n        this.label_ShootSpeed.string = this.ShootSpeedUI.toString();\r\n        this.label_BulletSpeed.string = this.BulletSpeedUI.toString();\r\n        this.label_BulletLifeTime.string = this.BulletLifeTimeUI.toString();\r\n        this.label_Score.string = this.Score.toString();\r\n        var tmp = (Math.floor(this.Skill_1_Time*10)/10).toString();\r\n        if(tmp.length<3)\r\n            tmp+='.0';\r\n        this.label_Skill_1_Time.string = tmp;\r\n\r\n        this.Player.getComponent('PlayerControl').EnergyBar.getComponent('EnergyBarControl').UpdateData(this.Skill_1_Time,this.Skill_1_Max);\r\n\r\n        //计算具体参数\r\n\r\n        // let i;\r\n        // for(i=1;i<20;i++)\r\n        //     cc.log(i,Math.log(i)*5+20);\r\n\r\n        this.PlayerSpeed2 = Math.log(this.PlayerSpeed2UI)*5+20;\r\n        this.PlayerSpeed1 = this.PlayerSpeed2;\r\n        this.RotationSpeed = 10+this.RotationSpeedUI;\r\n        this.ShootSpeed = 2*15/(15+this.ShootSpeedUI);\r\n        this.BulletSpeed = 200+2*this.BulletSpeedUI;\r\n        this.BulletLifeTime = 4+this.BulletLifeTimeUI*0.5;\r\n        this.BulletScale = 20/(40+this.Score/5)+0.2\r\n    },\r\n\r\n    _getARandomPositon :function(postion,min_distance_input,max_distance_input){\r\n        var max,min,x,y,min_distance,max_distance;\r\n\r\n        if(min_distance_input == null)\r\n            min_distance = 20;\r\n        else\r\n            min_distance = min_distance_input;\r\n\r\n        if(max_distance_input == null)\r\n            max_distance = 1000;\r\n        else\r\n            max_distance = max_distance_input;\r\n        //cc.log(min_distance,max_distance);\r\n        let count =0;\r\n        do{\r\n            count++;\r\n            if(count >100){\r\n                cc.log(\"too many random times\");\r\n                return cc.v2(x,y);\r\n            }\r\n\r\n            max = Math.min(290,postion.x + max_distance);\r\n            min = Math.max(-290,postion.x - max_distance);\r\n            x = Math.random()*(max-min+1)+min;\r\n\r\n            max = Math.min(290,postion.y + max_distance);\r\n            min = Math.max(-290,postion.y - max_distance);\r\n            y = Math.random()*(max-min+1)+min;\r\n\r\n            if(this._getDistance(cc.v2(x,y),postion)<min_distance)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),postion)>max_distance)\r\n                continue;\r\n            //是否离4个方块太近\r\n            if(this._getDistance(cc.v2(x,y),this.Block1.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block2.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block3.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Block4.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Turret.getPosition())<35)\r\n                continue;\r\n            if(this._getDistance(cc.v2(x,y),this.Player.getPosition())<min_distance)\r\n                continue;\r\n            break;\r\n        }while(true);\r\n        //cc.log(cc.v2(x,y));\r\n        return cc.v2(x,y);\r\n    },\r\n\r\n    _getDistance: function(pos1, pos2)\r\n    {\r\n        return Math.sqrt(Math.pow(pos1.x - pos2.x, 2) + Math.pow(pos1.y - pos2.y, 2));\r\n    },\r\n\r\n    SwapGoodItemSingle :function(ItemType){\r\n        let newItem = cc.instantiate(ItemType);\r\n        let postion= this._getARandomPositon(this.Player.getPosition(),200,300);\r\n        newItem.parent = this.node;\r\n        newItem.getComponent('Item').Init(postion,null);\r\n    },\r\n\r\n    SwapGoodItem :function(){\r\n        let Itemlist = new Array(this.upPlayerSpeedPrefab,\r\n                                this.upSkill_1_MAXPrefab,\r\n                                this.GetShieldPrefab);\r\n        let newItem1;\r\n        let newItem2;\r\n        if(this.Player.getComponent('PlayerControl').HaveShield){\r\n            newItem1 = cc.instantiate(Itemlist[0]);\r\n            newItem2 = cc.instantiate(Itemlist[1]);\r\n        }\r\n        else{\r\n            newItem1 = cc.instantiate(this.GetShieldPrefab);\r\n            let i = Math.floor(Math.random()*2);\r\n            newItem2 = cc.instantiate(Itemlist[i]);\r\n        }\r\n\r\n        newItem1.parent = this.node;\r\n        newItem2.parent = this.node;\r\n        let postion1 = this._getARandomPositon(this.Player.getPosition(),200,1000);\r\n        let postion2 = this._getARandomPositon(postion1,300,400);\r\n        newItem1.getComponent('Item').Init(postion1,newItem2);\r\n        newItem2.getComponent('Item').Init(postion2,newItem1);\r\n    },\r\n\r\n    SwapBadItem :function(){\r\n    \tvar Itemlist,i;\r\n\r\n    \tif(this.Score<4){\r\n    \t\tItemlist = new Array(this.upRotationSpeedPrefab,\r\n                                this.upShootSpeedPrefab,\r\n                                this.upBulletSpeedPrefab,\r\n                                this.upBulletLifeTimePrefab);\r\n    \t\ti = this.Score;\r\n    \t}\r\n    \telse{\r\n    \t\tif(this.LevelNum == 0){\r\n\t    \t\tItemlist = new Array(this.upRotationSpeedPrefab,\r\n\t                                this.upShootSpeedPrefab,\r\n\t                                this.upBulletSpeedPrefab,\r\n\t                                this.upBulletLifeTimePrefab);\r\n\t    \t\ti = Math.floor(Math.random()*4);\r\n\t    \t}\r\n\t    \tif(this.LevelNum == 1){\r\n\t    \t\tItemlist = new Array(this.upRotationSpeedPrefab,\r\n\t                                this.upShootSpeedPrefab,this.upShootSpeedPrefab,this.upShootSpeedPrefab,\r\n\t                                this.upBulletSpeedPrefab,\r\n\t                                this.upBulletLifeTimePrefab);\r\n\t    \t\ti = Math.floor(Math.random()*6);\r\n\t    \t}\r\n\t    \tif(this.LevelNum == 2){\r\n\t    \t\tItemlist = new Array(this.upRotationSpeedPrefab,\r\n\t                                this.upShootSpeedPrefab,\r\n\t                                this.upBulletSpeedPrefab,this.upBulletSpeedPrefab,this.upBulletSpeedPrefab,\r\n\t                                this.upBulletLifeTimePrefab);\r\n\t    \t\ti = Math.floor(Math.random()*6);\r\n\t    \t}\r\n\t    \tif(this.LevelNum == 3){\r\n\t    \t\tItemlist = new Array(this.upRotationSpeedPrefab,\r\n\t                                this.upShootSpeedPrefab,\r\n\t                                this.upBulletSpeedPrefab,\r\n\t                                this.upBulletLifeTimePrefab,this.upBulletLifeTimePrefab,this.upBulletLifeTimePrefab);\r\n\t    \t\ti = Math.floor(Math.random()*6);\r\n\t    \t}\r\n    \t}\r\n    \tcc.log(i);\r\n        var newItem = cc.instantiate(Itemlist[i]);\r\n\r\n        newItem.parent = this.node;\r\n        let postion;\r\n        if(this.Score >= 0 && this.Score < 5){\r\n            postion = this._getARandomPositon(this.Player.getPosition(),100,150);\r\n        }\r\n        if(this.Score >= 5 && this.Score < 15){\r\n            postion = this._getARandomPositon(this.Player.getPosition(),150,200);\r\n        }\r\n        if(this.Score >= 15 && this.Score < 25){\r\n            postion = this._getARandomPositon(this.Player.getPosition(),200,250);\r\n        }\r\n        if(this.Score >= 25 && this.Score < 35){\r\n           postion = this._getARandomPositon(this.Player.getPosition(),250,300);\r\n        }\r\n        if(this.Score >= 35 && this.Score < 50){\r\n            postion = this._getARandomPositon(this.Player.getPosition(),300,400);\r\n        }\r\n        if(this.Score >= 50)\r\n            postion = this._getARandomPositon(this.Player.getPosition(),200,1000);\r\n        newItem.x = postion.x;\r\n        newItem.y = postion.y;\r\n    },\r\n\r\n    SwapItem :function(){\r\n        if(this.ItemNum==5)\r\n            return;\r\n        if(this.Score==5){\r\n            this.SwapBadItem();\r\n        }\r\n        if(this.Score==15){\r\n            this.SwapBadItem();\r\n        }\r\n        if(this.Score==30){\r\n            this.SwapBadItem();\r\n        }\r\n        if((this.Score%5)==0){\r\n            if(this.Score == 5)\r\n                this.SwapGoodItemSingle(this.GetShieldPrefab);\r\n            else\r\n                this.SwapGoodItem();\r\n        }\r\n        else\r\n            this.SwapBadItem();\r\n    },\r\n\r\n    createPoint(point_id,pointTarget){\r\n        var Pointlist = new Array(this.PointRotationSpeedPrefab,\r\n                                this.PointShootSpeedPrefab,\r\n                                this.PointBulletSpeedPrefab,\r\n                                this.PointBulletLifeTimePrefab,\r\n                                this.PointPlayerSpeedPrefab,\r\n                                this.PointSkill_1_MAXPrefab);\r\n\r\n        var newPoint = cc.instantiate(Pointlist[point_id]);\r\n        newPoint.parent = this.Canvas;\r\n        newPoint.x = this.Player.getPosition().x;\r\n        newPoint.y = this.Player.getPosition().y;\r\n        newPoint.getComponent('PointControl').target = pointTarget.getChildByName(\"1\");\r\n    },\r\n\r\n    upRotationSpeed: function(){\r\n        this.RotationSpeedUI+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(0,this.label_RotationSpeed.node);\r\n    },\r\n\r\n    upShootSpeed: function(){\r\n        this.ShootSpeedUI+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(1,this.label_ShootSpeed.node);\r\n    },\r\n\r\n    upBulletSpeed: function(){\r\n        this.BulletSpeedUI+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(2,this.label_BulletSpeed.node);\r\n    },\r\n    upBulletLifeTime: function(){\r\n        this.BulletLifeTimeUI+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(3,this.label_BulletLifeTime.node);\r\n    },\r\n\r\n    upPlayerSpeed: function(){\r\n        this.PlayerSpeed2UI+=1;\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(4,this.label_PlayerSpeed.node);\r\n    },\r\n\r\n    upSkill_1_MAX: function(){\r\n        this.Skill_1_Time +=5;\r\n        if(this.Skill_1_Time>this.Skill_1_Max){\r\n            this.Skill_1_Max+=2;\r\n            this.Skill_1_Time = this.Skill_1_Max;\r\n        }\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n        this.createPoint(5,this.label_Skill_1_Time.node);\r\n    },\r\n\r\n    GetShield: function(){\r\n        this.Score +=1;\r\n        this.UpdateData();\r\n        this.SwapItem();\r\n    },\r\n\r\n    Skill_1_Start: function(){\r\n        if(this.GamePause)\r\n            return;\r\n        if(this.Skill_1_Type == Common.ActiveSkillNum.Bomb){\r\n            if(this.Skill_1_Time>=this.ActiveSkill1Energy){\r\n                this.Player.getComponent('PlayerControl').UseBomb();\r\n                this.Skill_1_Time-=this.ActiveSkill1Energy;\r\n                this.UpdateData();\r\n            }\r\n            else{\r\n                this.PlayerPowerFlash(3);\r\n                this.Player.getComponent('PlayerControl').EnergyBar.getComponent('EnergyBarControl').EnergyBarFlash(3);\r\n            }\r\n        }\r\n        if(this.Skill_1_Type == 2){\r\n            if(this.Skill_1_Time>=this.ActiveSkill2Energy){\r\n                this.Skill_1_Time-=this.ActiveSkill2Energy;\r\n                this.UpdateData();\r\n                this.GameSpeed = 0;\r\n                this.ResumeSpeed = false;\r\n                this.Player.getComponent('PlayerControl').TheWorldStart();\r\n                this.TheWorldTime = 3;\r\n            }\r\n            else{\r\n                this.PlayerPowerFlash(3);\r\n                this.Player.getComponent('PlayerControl').EnergyBar.getComponent('EnergyBarControl').EnergyBarFlash(3);\r\n            }\r\n        }\r\n    },\r\n\r\n    PlayerPowerFlash: function(num){\r\n        if(num>0){\r\n            this.label_Skill_1_Time.node.color = new cc.color(245,62,62);\r\n            this.scheduleOnce(function() {\r\n                        this.PlayerPowerFlashEnd(num);\r\n                        }, 0.2);\r\n        }\r\n        \r\n    },\r\n\r\n    PlayerPowerFlashEnd: function(num){\r\n        this.label_Skill_1_Time.node.color = new cc.color(255,255,255);\r\n        this.scheduleOnce(function() {\r\n                    this.PlayerPowerFlash(num-1);\r\n                    }, 0.2);\r\n    },\r\n\r\n    OnPressLabel:function(type){\r\n        if(!this.CanClick)\r\n            return;\r\n        if(type == 0){\r\n            this.MainMenuUI.active = false;\r\n            this.UpdateLogUI.active = true;\r\n        }\r\n    },\r\n\r\n    OnPressGameGuide: function(){\r\n        if(!this.CanClick)\r\n            return;\r\n        this.MainMenuUI.active = false;\r\n        this.GuideUI.active = true;\r\n        this.GuideUI.getComponent('GuideUIControl').Init();\r\n    },\r\n\r\n    OnPressGameStart: function(){\r\n        if(!this.CanClick)\r\n            return;\r\n        this.MainMenuUI.active = false;\r\n        this.ChooseActiveSkill();\r\n    },\r\n\r\n    OnPressGameSettingOk: function(){\r\n        if(this.Skill_1_Type!=null&&this.Skill_2_Type!=null){\r\n            this.GameInit();\r\n            //this.ChooseActiveSkill();\r\n            this.GameSetUI.active = false;\r\n        }\r\n    },\r\n\r\n    OnPressGameRank: function(){\r\n        if(!this.CanClick)\r\n            return;\r\n        this.GameRankUI.active = true;\r\n        this.SubmitScore();\r\n        this.GameRankUI.getComponent('GameRankControl').GetFirendRank();\r\n        this.CanClick = false;\r\n    },\r\n\r\n    OnPressShare:function(){\r\n        window.wx.shareAppMessage();\r\n    },\r\n\r\n\r\n    SubmitScore: function(){\r\n        if(this.Score==null)\r\n            this.Score = 0;\r\n        var testDate = new Date();\r\n        if (CC_WECHATGAME) {\r\n            window.wx.postMessage({\r\n                messageType: Common.MessageType.SubmitData,\r\n                MAIN_MENU_NUM: \"Score\",\r\n                Data: this.Score,\r\n            });\r\n        } else {\r\n            cc.log(\"提交得分:Score:\" + this.Score);\r\n        }\r\n    },\r\n});\r\n"]}